import{_ as S,c as v,d as E,l as m,a as d,A as r,b as j}from"./index.5e4e65cc.js";import{g as A,u as I,r as M,H as F,c as u,a as w,o as a,b as i,d as e,h as T,i as P,v as V,F as x,k as b,p as B,j as H,G as k,e as y,B as p,m as _,t as c,n as q}from"./vendor.b0e93d7b.js";const z={setup(){const n=A(""),h=I(),f=M({editable:{}});return F(async()=>{try{await v.getMyGameNights("/account/gamenight"),await E.getMyGames("/account/myGames")}catch(t){m.error(t),d.toast(t.message,"error")}}),{search:n,state:f,closetGames:u(()=>r.myGames.filter(t=>t.owned)),myGameNights:u(()=>r.myGameNights),myAttendance:u(()=>r.myAttendance),account:u(()=>r.account),async deleteGameNight(t){try{if(!await d.confirm("Delete your game night?"))return;const g=await v.delete(t);d.toast("Deleted","success")}catch(o){m.error(o),d.toast("Something went wrong deleting this GameNight!","error")}},async cancelGameNight(t){try{if(!await d.confirm("Cancel your game night?"))return;await v.cancel(t),d.toast("You've canceled your event.","success"),this.addXp()}catch(o){m.error(o),d.toast(o.message,"error")}},async addXp(){let t=r.account;t.xp-=25,t.xp>=640?t.rank="Noob-Slayer":t.xp>=320?t.rank="Royalty":t.xp>=160?t.rank="Champion":t.xp>=80?t.rank="Knight":t.xp>=40&&(t.rank="Squire"),m.log("xp",t),await j.edit(t)},async findGameNight(){try{await v.findGameNight(n.value)?(n.value="",h.push({name:"GameNightDetails",params:{id:r.activeGameNight.id}})):d.toast("No game night found","error")}catch(t){m.error(t)}},setActive(t){r.activeGameNight=t},formatDate(t){return new Date(t).toLocaleString()},compareDate(t){let o=Date.parse(t),g=Date.now();if(g>o)return"This game night has passed.";if(g<o)return""}}}},l=n=>(B("data-v-f7adadee"),n=n(),H(),n),L={class:"gameNight container-fluid p-5"},R=l(()=>e("div",{class:"row"},[e("div",{class:"col text-center"},[e("h1",{class:"text-light"},"GAME NIGHTS")])],-1)),X={class:"row"},J={class:"col-md-3 my-3 text-center"},K={class:"input-group mb-3"},O=l(()=>e("button",{class:"btn btn-outline-light",title:"Find Game"}," Find Game ",-1)),U=l(()=>e("h3",{class:"text-light"},"Hosted Game Nights:",-1)),Y={class:"col"},Q={class:"row justify-content-center"},W={class:"col-md-8 mt-3 card elevation-2 selectable grow",title:"Game Night Details"},Z={class:"row"},$={class:"col"},ee={class:"col text-end dropdown"},te=l(()=>e("i",{class:"rounded p-2 mdi mdi-dots-horizontal mdi-24px text-dark selectable dropdown-toggle","data-bs-toggle":"dropdown",title:"Options"},null,-1)),se={class:"dropdown-menu"},oe=["data-bs-target"],ae=l(()=>e("button",{class:"dropdown-item selectable text-primary"}," Edit Event ",-1)),ie=[ae],ce=["onClick"],ne=["onClick"],de={class:"row"},le={class:"col-6 mt-2"},re={class:"col-6 mt-2 text-end"},he={key:0,class:"row justify-content-center"},me={class:"col-md-6 my-3"},_e={class:"row"},ge={class:"col"},ve={class:"text-danger"},ue={class:"row"},ye={class:"col"},pe={key:1,class:"row justify-content-center text-danger"},Ne=l(()=>e("div",{class:"col-md-6 my-3"},[e("div",{class:"row"},[e("div",{class:"col"},[e("h5",null,"This game night has been canceled.")])])],-1)),we=[Ne],fe=q("Edit your game night!"),Ge={class:"row"},xe={class:"col"},be=l(()=>e("h3",{class:"text-light my-4"},"Joined Game Nights:",-1)),ke={key:0,class:"col"},De={class:"row justify-content-center"},Ce={class:"col-md-8 m-3 card elevation-2 selectable grow",title:"Game Night Details"},Se={class:"row"},Ee={class:"col"},je={class:"row"},Ae={class:"col-6 mt-2"},Ie={class:"col-6 mt-2 text-end"},Me={key:0,class:"row justify-content-center"},Fe={class:"col-md-6 my-3"},Te={class:"row"},Pe={class:"col"},Ve={class:"text-danger"},Be={class:"row"},He={class:"col"},qe={key:1,class:"row justify-content-center text-danger"},ze=l(()=>e("div",{class:"col-md-6 my-3"},[e("div",{class:"row"},[e("div",{class:"col"},[e("h5",null,"This game night has been canceled.")])])],-1)),Le=[ze];function Re(n,h,f,t,o,g){const G=w("router-link"),D=w("EditForm"),C=w("Modal");return a(),i("div",L,[R,e("div",X,[e("div",J,[e("form",{onSubmit:h[1]||(h[1]=T((...s)=>t.findGameNight&&t.findGameNight(...s),["prevent"]))},[e("div",K,[P(e("input",{required:"","onUpdate:modelValue":h[0]||(h[0]=s=>t.search=s),type:"text",class:"form-control",placeholder:"Enter code...","aria-label":"Enter code...","aria-describedby":"button-addon2",maxlength:"6"},null,512),[[V,t.search]]),O])],32)])]),U,(a(!0),i(x,null,b(t.myGameNights,s=>(a(),i("div",{class:"row",key:s.id},[e("div",Y,[e("div",Q,[e("div",W,[e("div",Z,[e("div",$,[e("div",ee,[te,e("ul",se,[e("li",{"data-bs-toggle":"modal","data-bs-target":"#editGameNight-"+s.id},ie,8,oe),e("li",null,[e("button",{class:"dropdown-item selectable text-primary",onClick:N=>t.cancelGameNight(s.id)}," Cancel Event ",8,ce)]),e("li",null,[e("button",{class:"dropdown-item selectable text-danger",onClick:N=>t.deleteGameNight(s.id)}," Delete Event ",8,ne)])])])])]),e("div",null,[e("div",{class:k(s.isCanceled?"disabled":"")},[y(G,{to:{name:"GameNightDetails",params:{id:s.id}},onClick:N=>t.setActive(s)},{default:p(()=>[e("div",de,[e("div",le,[e("h4",null,c(s.name),1)]),e("div",re,[e("h5",null,"Game Pin: "+c(s.pin),1)])]),s.isCanceled?_("",!0):(a(),i("div",he,[e("div",me,[e("div",_e,[e("div",ge,[e("h3",ve,c(t.compareDate(s.gameNightDate)),1),e("h5",null,c(t.formatDate(s.gameNightDate)),1)])]),e("div",ue,[e("div",ye,[e("h5",null,c(s.location),1)])])])])),s.isCanceled?(a(),i("div",pe,we)):_("",!0)]),_:2},1032,["to","onClick"])],2)])])])]),y(C,{id:"editGameNight-"+s.id},{"modal-title":p(()=>[fe]),"modal-body":p(()=>[y(D,{gameNight:s},null,8,["gameNight"])]),_:2},1032,["id"])]))),128)),e("div",Ge,[e("div",xe,[be,(a(!0),i(x,null,b(t.myAttendance,s=>(a(),i("div",{class:"row",key:s.gameNightId},[s.gameNight.accountId!==t.account.id?(a(),i("div",ke,[e("div",De,[e("div",Ce,[e("div",Se,[e("div",Ee,[e("div",null,[e("div",{class:k(s.gameNight.isCanceled?"disabled":"")},[y(G,{to:{name:"GameNightDetails",params:{id:s.gameNightId}},onClick:N=>t.setActive(s.gameNight)},{default:p(()=>[e("div",je,[e("div",Ae,[e("h4",null,c(s.gameNight.name),1)]),e("div",Ie,[e("h5",null,"Game Pin: "+c(s.gameNight.pin),1)])]),s.gameNight.isCanceled?_("",!0):(a(),i("div",Me,[e("div",Fe,[e("div",Te,[e("div",Pe,[e("h3",Ve,c(t.compareDate(s.gameNight.gameNightDate)),1),e("h5",null,c(t.formatDate(s.gameNight.gameNightDate)),1)])]),e("div",Be,[e("div",He,[e("h5",null,c(s.gameNight.location),1)])])])])),s.gameNight.isCanceled?(a(),i("div",qe,Le)):_("",!0)]),_:2},1032,["to","onClick"])],2)])])])])])])):_("",!0)]))),128))])])])}var Ke=S(z,[["render",Re],["__scopeId","data-v-f7adadee"]]);export{Ke as default};
