var me=Object.defineProperty;var H=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var W=(s,e,t)=>e in s?me(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,F=(s,e)=>{for(var t in e||(e={}))ue.call(e,t)&&W(s,t,e[t]);if(H)for(var t of H(e))_e.call(e,t)&&W(s,t,e[t]);return s};import{r as K,c as g,a as x,b as c,d as a,e as y,F as O,o as d,f as Y,S as J,u as X,g as $,w as Z,M as q,h as N,i as f,v as w,p as C,j as S,t as u,k as ee,l as ge,m as G,n as A,q as M,s as he,x as pe,y as T,z as be,A as ve,B as L,C as ye,D as fe,E as te}from"./vendor.b0e93d7b.js";const we=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}};we();const i=K({user:{},account:{},atlasGames:[],myGames:[],activeGameNight:{},myGameNights:[],players:[],gameQueue:[],myAttendance:[],gameNights:{}});var h=(s,e)=>{for(const[t,o]of e)s[t]=o;return s};const Ge={name:"App",setup(){return{appState:g(()=>i)}}},xe=a("footer",null,null,-1);function $e(s,e,t,o,l,r){const n=x("Navbar"),v=x("router-view");return d(),c(O,null,[a("header",null,[y(n)]),a("main",null,[y(v)]),xe],64)}var Ne=h(Ge,[["render",$e]]);const ae=window.location.origin.includes("localhost"),j=ae?"http://localhost:3000":"",Ce="kylee-marlin.us.auth0.com",Se="mpXgASnPybMqw6Qp3lKxL9QNqXVp7ylk",ke="https://CoolStuff.com";function E(s,e){if(ae)console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(s){case"log":case"assert":return}console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const _={log(){E("log",arguments)},error(){E("error",arguments)},warn(){E("warn",arguments)},assert(){E("assert",arguments)},trace(){E("trace",arguments)}},m=Y.create({baseURL:j,timeout:8e3}),Ae=Y.create({baseURL:"https://api.boardgameatlas.com/api",timeout:8e3});class Re{async getAccount(){try{const e=await m.get("/account");i.account=e.data}catch(e){_.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async edit(e){const t=await m.put("account/",e);i.account=t.data}}const oe=new Re;class p{static async confirm(e="Are you sure?",t="You won't be able to revert this!",o="warning",l="Yes, delete it!"){try{return!!(await J.fire({title:e,text:t,icon:o,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:l})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",o="top-end",l=3e3,r=!0){J.fire({title:e,icon:t,position:o,timer:l,timerProgressBar:r,toast:!0,showConfirmButton:!1})}}const Te={setup(){X();const s=$({});return Z(()=>{s.value={}}),{editable:s,async edit(){try{await oe.edit(s.value),q.getOrCreateInstance(document.getElementById("accountModal")).hide()}catch(e){_.error(e),p.toast("Failed to Edit","error")}}}}},Ee={class:"modal fade",id:"accountModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ie={class:"modal-dialog"},Oe={class:"modal-content"},Me=a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"exampleModalLabel"},"Edit account"),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Pe={class:"modal-body"},Qe={class:"mb-3 d-flex justify-content-between"},De=a("label",{for:"picture",class:"form-label"},"Picture",-1),qe=a("label",{for:"name",class:"form-label"},"Name",-1),Le=a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),a("button",{type:"submit",class:"btn btn-primary"}," Save ")],-1);function je(s,e,t,o,l,r){return d(),c("div",Ee,[a("div",Ie,[a("div",Oe,[Me,a("div",Pe,[a("form",{onSubmit:e[2]||(e[2]=N((...n)=>o.edit&&o.edit(...n),["prevent"]))},[a("div",Qe,[a("div",null,[De,f(a("input",{type:"url",class:"form-control",name:"picture",id:"picture","aria-describedby":"picture",placeholder:"picture...","onUpdate:modelValue":e[0]||(e[0]=n=>o.editable.picture=n)},null,512),[[w,o.editable.picture]])]),a("div",null,[qe,f(a("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"name",placeholder:"Name...","onUpdate:modelValue":e[1]||(e[1]=n=>o.editable.name=n)},null,512),[[w,o.editable.name]])])]),Le],32)])])])])}var Be=h(Te,[["render",je]]),Ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Be});class se{constructor(e){this.name=e.name,this.owned=e.owned||!1,this.accountId=e.accountId,this.atlasUrl=e.url||e.atlasUrl,this.description=e.description,this.houseRules=e.houseRules,this.rules_url=e.rules_url,this.atlasGameId=e.atlasGameId||e.id,this.id=e._id,this.min_players=e.min_players,this.max_players=e.max_players,this.price=e.price,this.min_playtime=e.min_playtime,this.max_playtime=e.max_playtime,this.image_url=e.image_url,this.min_age=e.min_age}}const Ue="&client_id=RhH4WBOfK3";class ze{async getAll(e=""){const t=await Ae.get(e+"&limit=24"+Ue);i.atlasGames=t.data.games.map(o=>new se(o))}async getMyGames(e=""){const t=await m.get(e);i.myGames=t.data.map(o=>new se(o))}async addToWishlist(e){if(i.myGames.find(o=>o.atlasUrl==e.atlasUrl))p.toast("Already in wishlist.","error");else{const o=await m.post("api/games",e);i.myGames.unshift(o.data)}}async addToGameCloset(e){if(e.id)await m.put("api/games/"+e.id,e);else{const t=await m.post("api/games",e);i.myGames.unshift(t.data)}}async addRules(e,t){await m.put("api/games/"+e,t)}async remove(e){await m.delete("api/games/"+e),i.myGames=i.myGames.filter(t=>t.id!==e)}}const k=new ze;const He={props:{game:{type:Object}},setup(s){const e=$({});return{editable:e,closetGames:g(()=>i.myGames.filter(t=>t.owned)),myGameNights:g(()=>i.myGameNights),account:g(()=>i.account),async addRules(t){try{await k.addRules(t,e.value),q.getOrCreateInstance(document.getElementById("addRules-"+t)).hide(),await k.getMyGames("/account/myGames")}catch(o){_.log(o),p.toast(o.message,"error")}}}}},B=s=>(C("data-v-b7a60da2"),s=s(),S(),s),We={class:"modal-body"},Fe={class:"row"},Ke={class:"col m-2"},Ye=B(()=>a("h6",null,"Add Official Rules with a link:",-1)),Je={class:"row"},Xe={class:"col m-2"},Ze=B(()=>a("h6",null,"Add House Rules:",-1)),et=B(()=>a("div",{class:"modal-footer"},[a("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Save Changes ")],-1));function tt(s,e,t,o,l,r){return d(),c("form",{onSubmit:e[2]||(e[2]=N(n=>o.addRules(t.game.id),["prevent"]))},[a("div",We,[a("div",Fe,[a("div",Ke,[Ye,f(a("input",{type:"url","aria-label":"OfficialRulesURL",placeholder:"Add Link to Official Rules",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>o.editable.rules_url=n)},null,512),[[w,o.editable.rules_url]])])]),a("div",Je,[a("div",Xe,[Ze,f(a("textarea",{type:"text","aria-label":"HouseRules",placeholder:"Add House Rules",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>o.editable.houseRules=n)},null,512),[[w,o.editable.houseRules]])])])]),et],32)}var at=h(He,[["render",tt],["__scopeId","data-v-b7a60da2"]]),ot=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:at});class st{async createGameNight(e){const t=await m.post("api/gamenight",e);i.activeGameNight=t.data,i.myGameNights.push(t.data)}async getMyGameNights(e=""){const t=await m.get(e),o=await m.get("account/players");let l=this.sortByDate(t.data),r=this.sortByDate(o.data);i.myGameNights=l,i.myAttendance=r}sortByDate(e){return e.sort((t,o)=>t.gameNightDate<o.gameNightDate?-1:t.gameNightDate>o.gameNightDate?1:0)}async delete(e){await m.delete("/api/gamenight/"+e),i.myGameNights=i.myGameNights.filter(t=>t.id!==e)}async cancel(e){let t=i.myGameNights;const l=(await m.put(`api/gamenight/${e}/isCanceled`)).data,r=i.myGameNights.findIndex(n=>n.id===l.id);r===-1&&i.myGameNights.unshift(l),t.splice(r,1,l)}async edit(e,t){const l=(await m.put(`api/gamenight/${e}`,t)).data,r=i.myGameNights.findIndex(n=>n.id===l.id);r===-1&&i.myGameNights.unshift(l),i.myGameNights.splice(r,1,l)}async findGameNight(e=""){const t=await m.get(`api/gamenight/pin/${e}`);return i.activeGameNight=t.data,t.data}async findGameNightId(e){const t=await m.get(`api/gamenight/${e}`);i.activeGameNight=t.data,_.log(t.data)}async getAllPlayers(e){const t=await m.get(`api/gamenight/${e}/players`);i.players=t.data}}const V=new st,nt={props:{gameNight:{type:Object}},setup(s){const e=$({}),t=$("Pick a game");return Z(async()=>{try{e.value=F({},s.gameNight)}catch(o){_.error(o),p.toast(o.message,"error")}}),{editable:e,gameQueue:t,closetGames:g(()=>i.myGames.filter(o=>o.owned)),myGameNights:g(()=>i.myGameNights),account:g(()=>i.account),async editGameNight(o){try{await V.edit(o,e.value),_.log("editable.value",e.value,"gameNightId",o),q.getOrCreateInstance(document.getElementById("editGameNight-"+o)).hide(),await V.getMyGameNights("/account/gamenight")}catch(l){p.toast(l.message,"error")}}}}},it={class:"modal-body"},lt={class:"row"},rt={class:"col m-2"},ct={class:"row"},dt={class:"col m-2"},mt={class:"row"},ut={class:"col m-2"},_t={class:"dropdown mx-4 my-2",hidden:""},gt={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},ht={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},pt=["onClick"],bt=a("div",{class:"modal-footer"},[a("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Save Changes ")],-1);function vt(s,e,t,o,l,r){return d(),c("form",{onSubmit:e[3]||(e[3]=N(n=>o.editGameNight(t.gameNight.id),["prevent"]))},[a("div",it,[a("div",lt,[a("div",rt,[f(a("input",{type:"text","aria-label":"name",placeholder:"Name your game night",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>o.editable.name=n),required:""},null,512),[[w,o.editable.name]])])]),a("div",ct,[a("div",dt,[f(a("input",{type:"text","aria-label":"location",placeholder:"Location",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>o.editable.location=n),required:""},null,512),[[w,o.editable.location]])])]),a("div",mt,[a("div",ut,[f(a("input",{type:"datetime-local","aria-label":"date",placeholder:"Date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>o.editable.gameNightDate=n),required:""},null,512),[[w,o.editable.gameNightDate]])])]),a("div",_t,[a("button",gt,u(o.gameQueue),1),a("ul",ht,[(d(!0),c(O,null,ee(o.closetGames,n=>(d(),c("li",{key:n.atlasGameId},[a("div",{class:"dropdown-item selectable",onClick:v=>o.gameQueue=n.name},u(n.name),9,pt)]))),128))])])]),bt],32)}var yt=h(nt,[["render",vt]]),ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:yt});const wt={props:{game:{type:Object},isSearchResult:{type:Boolean,default:!1}},setup(s){const e=ge();let t=$(!1);return{flipped:t,route:e,user:g(()=>i.user),account:g(()=>i.account),hasGame:g(()=>i.myGames.find(l=>l.atlasGameId===s.game.atlasGameId)),async addToWishlist(){try{const o=s.game,l=await k.addToWishlist(o);p.toast("Added to Wishlist","success")}catch(o){p.toast("Already in your wishlist!:"+o.message,"error"),_.error(o)}},async addToGameCloset(){try{const o=s.game;o.owned=!0,document.getElementById(s.game.atlasGameId).classList.add("animate__bounce"),await k.addToGameCloset(o),p.toast("Added to Game Closet","success")}catch(o){p.toast("Already in your closet!"+o.message,"error"),_.error(o)}},async remove(o){try{if(!await p.confirm("Remove game?"))return;document.getElementById(s.game.atlasGameId).classList.add("animate__rollOut"),setTimeout(async()=>{await k.remove(o)},600)}catch(l){p.toast(l.message,"error"),_.error(l)}},flipCard(){t.value=!t.value,t.value?document.getElementById(s.game.atlasGameId).style.transform="rotateY(180deg)":document.getElementById(s.game.atlasGameId).style.transform="rotateY(0deg)"}}}},ne=s=>(C("data-v-e3a7cff4"),s=s(),S(),s),Gt=["id"],xt={class:"flip-card-front elevation-3"},$t={class:"container"},Nt={class:"row"},Ct={class:"col p-0"},St=["src"],kt={class:"row"},At={class:"col text-center my-1"},Rt={class:"col"},Tt={class:"flip-card-back elevation-3"},Et={class:"row"},It={key:0,class:"col text-danger text-end"},Ot=ne(()=>a("div",{class:"row"},[a("div",{class:"col"},[a("h3",{class:"my-4"},"Game Details")])],-1)),Mt={key:0,class:"row"},Pt={key:0,class:"col text-start mx-3"},Qt={key:1,class:"col text-start ms-3"},Dt={key:1,class:"row"},qt={key:0,class:"col text-start ms-3"},Lt={key:1,class:"col text-start ms-3"},jt={key:2,class:"row"},Bt={key:0,class:"col text-start ms-3"},Vt={class:"row"},Ut={class:"col text-start mt-3 ms-3"},zt={key:0},Ht=["href"],Wt={key:1},Ft=["href"],Kt={key:3,class:"row"},Yt={key:0,class:"col mt-3"},Jt={key:0,class:"row"},Xt={key:1,class:"col m-2 text-danger"},Zt=ne(()=>a("p",null,"Added",-1)),ea=[Zt],ta={key:1,class:"col mt-3"};function aa(s,e,t,o,l,r){return d(),c("div",{class:"flip-card my-4 grow",onClick:e[7]||(e[7]=(...n)=>o.flipCard&&o.flipCard(...n))},[a("div",{class:"flip-card-inner selectable animate__animated",id:t.game.atlasGameId,style:{transform:"rotateY(0deg)"}},[a("div",xt,[a("div",$t,[a("div",Nt,[a("div",Ct,[a("img",{class:"img-container m-2",src:t.game.image_url,alt:"",loading:"lazy"},null,8,St)])]),a("div",kt,[a("div",At,[a("h3",Rt,u(t.game.name),1)])])])]),a("div",Tt,[a("div",Et,[o.route.name=="GameCloset"?(d(),c("div",It,[a("i",{class:"mdi mdi-trash-can-outline selectable mdi-24px p-2",onClick:e[0]||(e[0]=n=>o.remove(t.game.id))})])):G("",!0)]),Ot,t.game.min_playtime&&t.game.max_playtime?(d(),c("div",Mt,[t.game.min_playtime===t.game.max_playtime?(d(),c("h4",Pt," Play time: "+u(t.game.min_playtime)+" minutes ",1)):(d(),c("h4",Qt," Play time: "+u(t.game.min_playtime)+" - "+u(t.game.max_playtime)+" minutes ",1))])):G("",!0),t.game.min_players&&t.game.max_players?(d(),c("div",Dt,[t.game.min_players===t.game.max_players?(d(),c("h4",qt," Number of players: "+u(t.game.min_players),1)):(d(),c("h4",Lt," Number of players: "+u(t.game.min_players)+" - "+u(t.game.max_players),1))])):G("",!0),t.game.owned?G("",!0):(d(),c("div",jt,[t.game.price>0?(d(),c("div",Bt,[a("h4",null,"Cost: $"+u(t.game.price),1)])):G("",!0)])),a("div",Vt,[a("div",Ut,[t.game.owned?(d(),c("h5",Wt,[a("a",{"data-bs-toggle":"offcanvas",href:"#gameDetails-"+t.game.id},"See More Details",8,Ft)])):(d(),c("h5",zt,[a("a",{target:"_blank",href:t.game.atlasUrl},"See More Details",8,Ht)]))])]),o.user.isAuthenticated?(d(),c("div",Kt,[t.isSearchResult?(d(),c("div",Yt,[o.hasGame?(d(),c("div",Xt,ea)):(d(),c("div",Jt,[a("div",{class:"col-6 text-center",onClick:e[2]||(e[2]=N(()=>{},["stop"]))},[o.route.name=="Search"&&!t.game.owned?(d(),c("button",{key:0,onClick:e[1]||(e[1]=n=>o.addToWishlist(t.game)),class:"btn btn-secondary",title:"add to wishlist"}," Add to Wishlist ")):G("",!0)]),a("div",{class:"col-6 text-center px-2",onClick:e[4]||(e[4]=N(()=>{},["stop"]))},[t.game.owned?G("",!0):(d(),c("button",{key:0,class:"btn btn-secondary",title:"add to game closet",onClick:e[3]||(e[3]=n=>o.addToGameCloset(t.game))}," Add to Closet "))])]))])):(d(),c("div",ta,[a("div",{class:"text-end",onClick:e[6]||(e[6]=N(()=>{},["stop"]))},[t.game.owned?G("",!0):(d(),c("button",{key:0,class:"btn btn-secondary me-3",title:"add to game closet",onClick:e[5]||(e[5]=n=>o.addToGameCloset(t.game))}," Add to Closet "))])]))])):G("",!0)])],8,Gt)])}var oa=h(wt,[["render",aa],["__scopeId","data-v-e3a7cff4"]]),sa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oa});const na={props:{game:{type:Object}},setup(s){return{editable:$({}),closetGames:g(()=>i.myGames.filter(t=>t.owned)),async addRules(t){try{let o=t.target.innerText,l=s.game.id,r={houseRules:o};await k.addRules(l,r),await k.getMyGames("/account/myGames")}catch(o){_.log(o),p.toast(o.message,"error")}}}}},ie=s=>(C("data-v-1f06305c"),s=s(),S(),s),ia={class:"offcanvas-body p-1"},la={class:"col text-center"},ra=["src","alt"],ca={class:"col my-2"},da={key:0,class:"col"},ma={key:1,class:"col"},ua={class:"col"},_a=["innerHTML"],ga={class:"accordion mb-5 col mt-3",id:"accordionExample"},ha={class:"accordion-item bgColor"},pa=ie(()=>a("h2",{class:"accordion-header",id:"headingOne"},[a("button",{class:"accordion-button bg-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Official Rules ")],-1)),ba={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},va={key:0,class:"accordion-body"},ya=["href"],fa={key:1,class:"accordion-body"},wa=["data-bs-target"],Ga=["data-bs-target"],xa={class:"accordion-item bgColor"},$a=ie(()=>a("h2",{class:"accordion-header",id:"headingTwo"},[a("button",{class:"accordion-button collapsed bg-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," House Rules ")],-1)),Na={id:"collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample"};function Ca(s,e,t,o,l,r){const n=x("QRCodeGame");return d(),c("div",ia,[a("div",la,[a("img",{class:"img-container m-2",src:t.game.image_url,alt:t.game.name},null,8,ra)]),a("div",ca,[a("h2",null,u(t.game.name),1)]),t.game.min_players!==t.game.max_players?(d(),c("div",da,u(t.game.min_players)+" to "+u(t.game.max_players)+" players ",1)):(d(),c("div",ma,u(t.game.min_players)+" players",1)),a("div",ua,u(t.game.min_playtime)+" to "+u(t.game.max_playtime)+" minute playtime ",1),a("div",{class:"col mt-2",innerHTML:t.game.description},null,8,_a),a("div",ga,[a("div",ha,[pa,a("div",ba,[t.game.rules_url?(d(),c("div",va,[a("a",{target:"_blank",href:t.game.rules_url},u(t.game.name)+" Rules",9,ya),y(n,{game:t.game},null,8,["game"])])):(d(),c("div",fa,[a("p",null,[A(" No "+u(t.game.name)+" rules found. ",1),a("span",{"data-bs-toggle":"modal","data-bs-target":"#addRules-"+t.game.id,class:"selectable"},"Add now?",8,wa)]),a("i",{class:"mdi mdi-plus-thick text-secondary selectable btn","data-bs-toggle":"modal","data-bs-target":"#addRules-"+t.game.id,title:"Add Official Rules"}," Add Rules",8,Ga)]))])]),a("div",xa,[$a,a("div",Na,[a("div",{class:"accordion-body hover",contenteditable:"",onBlur:e[0]||(e[0]=(...v)=>o.addRules&&o.addRules(...v))},u(t.game.houseRules),33)])])])])}var Sa=h(na,[["render",Ca],["__scopeId","data-v-1f06305c"]]),ka=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Sa});const Aa={setup(){return{}}},Ra={class:"modal",tabindex:"-1"},Ta={class:"modal-dialog modal-xl"},Ea={class:"modal-content"},Ia={class:"modal-header"},Oa={class:"modal-title"},Ma=a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Pa={class:"modal-body"};function Qa(s,e,t,o,l,r){return d(),c("div",Ra,[a("div",Ta,[a("div",Ea,[a("div",Ia,[a("h5",Oa,[M(s.$slots,"modal-title")]),Ma]),a("div",Pa,[M(s.$slots,"modal-body")])])])])}var Da=h(Aa,[["render",Qa]]),qa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Da});const La="modulepreload",le={},ja="/",R=function(e,t){return!t||t.length===0?e():Promise.all(t.map(o=>{if(o=`${ja}${o}`,o in le)return;le[o]=!0;const l=o.endsWith(".css"),r=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const n=document.createElement("link");if(n.rel=l?"stylesheet":La,l||(n.as="script",n.crossOrigin=""),n.href=o,document.head.appendChild(n),l)return new Promise((v,Q)=>{n.addEventListener("load",v),n.addEventListener("error",Q)})})).then(()=>e())};function Ba(s){switch(s){case"./pages/AboutPage.vue":return R(()=>import("./AboutPage.ebee6cf9.js"),["assets/AboutPage.ebee6cf9.js","assets/vendor.b0e93d7b.js"]);case"./pages/AccountPage.vue":return R(()=>import("./AccountPage.147af321.js"),["assets/AccountPage.147af321.js","assets/AccountPage.1d38451d.css","assets/vendor.b0e93d7b.js"]);case"./pages/ActiveGameNightPage.vue":return R(()=>import("./ActiveGameNightPage.07c7744e.js"),["assets/ActiveGameNightPage.07c7744e.js","assets/ActiveGameNightPage.98f5bb6a.css","assets/vendor.b0e93d7b.js"]);case"./pages/GameClosetPage.vue":return R(()=>import("./GameClosetPage.24084894.js"),["assets/GameClosetPage.24084894.js","assets/GameClosetPage.64ac7c0a.css","assets/vendor.b0e93d7b.js"]);case"./pages/GameNightPage.vue":return R(()=>import("./GameNightPage.9bad5435.js"),["assets/GameNightPage.9bad5435.js","assets/GameNightPage.1412185f.css","assets/vendor.b0e93d7b.js"]);case"./pages/SearchPage.vue":return R(()=>import("./SearchPage.4ed7ac24.js"),["assets/SearchPage.4ed7ac24.js","assets/SearchPage.3f5244e4.css","assets/vendor.b0e93d7b.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function I(s){return()=>Ba(`./pages/${s}.vue`)}const Va=[{path:"/",name:"GameCloset",component:I("GameClosetPage"),beforeEnter:T},{path:"/search",name:"Search",component:I("SearchPage"),beforeEnter:T},{path:"/gameNight",name:"GameNight",component:I("GameNightPage"),beforeEnter:T},{path:"/gameNight/:id",name:"GameNightDetails",component:I("ActiveGameNightPage"),beforeEnter:T},{path:"/account",name:"Account",component:I("AccountPage"),beforeEnter:T}],re=he({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:pe(),routes:Va}),P={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Ua{constructor(e=!1,t=j){this.socket=be(t||j),this.requiresAuth=e,this.queue=[],this.authenticated=!1,this.on(P.connected,this.onConnected).on(P.authenticated,this.onAuthenticated).on(P.error,this.onError)}on(e,t){var o;return(o=this.socket)==null||o.on(e,t.bind(this)),this}onConnected(e){_.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){_.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(P.authenticate,e)}joinRoom(e){var t;(t=this.socket)==null||t.emit("Join_Room",`Game${e}Night`),_.log("Joined_Room",e)}onError(e){_.error("[SOCKET_ERROR]",e)}enqueue(e,t){_.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){_.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class za extends Ua{constructor(){super();this.on("error",this.onError).on("New Game Que",this.newGameQ).on("Removed Game Que",this.removedGameQ).on("Votes on Game Que",this.votes).on("Attending Game Night",this.newPlayer).on("Leaving Game Night",this.deletePlayer).on("Bringing Game Night",this.bringing)}newGameQ(e){i.gameQueue.push(e)}removedGameQ(e){i.gameQueue=i.gameQueue.filter(t=>t.id!==e)}votes(e){let t=i.gameQueue.findIndex(o=>o.id===e.id);i.gameQueue.splice(t,1,e)}newPlayer(e){i.players=[...i.players,e]}deletePlayer(e){i.players=i.players.filter(t=>t.id!==e.id),i.gameQueue=i.gameQueue.filter(t=>t.accountId!==e.accountId)}bringing(e){_.log("player id",e);let t=i.players.findIndex(o=>o.id===e);i.players.splice(t,1,e)}onError(e){p.toast(e.message,"error")}}const ce=new za,b=ve({domain:Ce,clientId:Se,audience:ke,useRefreshTokens:!0,onRedirectCallback:s=>{re.push(s&&s.targetUrl?s.targetUrl:window.location.pathname)}});b.on(b.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=b.bearer,m.interceptors.request.use(Ha),i.user=b.user,await oe.getAccount(),ce.authenticate(b.bearer)});async function Ha(s){if(!b.isAuthenticated)return s;const e=b.identity.exp*1e3,t=e<Date.now(),o=e<Date.now()+1e3*60*60*12;return t?await b.loginWithPopup():o&&(await b.getTokenSilently(),m.defaults.headers.authorization=b.bearer,ce.authenticate(b.bearer)),s}var Wa="/assets/GameQ2.7a579647.png";const Fa={setup(){return{user:g(()=>i.user),account:g(()=>i.account),async login(){b.loginWithPopup()},async logout(){b.logout({returnTo:window.location.origin})}}}},U=s=>(C("data-v-4a5d9cf2"),s=s(),S(),s),Ka={class:"navbar navbar-expand-lg navbar-dark bg-primary px-3 border-bottom border-2 border-dark"},Ya=ye('<div class="d-flex flex-column align-items-center me-5" data-v-4a5d9cf2><a href="/" data-v-4a5d9cf2><img alt="logo" src="'+Wa+'" height="60" data-v-4a5d9cf2></a></div><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation" data-v-4a5d9cf2><span class="navbar-toggler-icon" data-v-4a5d9cf2></span></button>',2),Ja={class:"collapse navbar-collapse",id:"navbarText"},Xa={class:"navbar-nav me-auto"},Za=A(" Game Closet "),eo=A(" Search Games "),to=A(" Game Night "),ao=U(()=>a("button",{class:"btn btn-light me-5",title:"Host Game","data-bs-target":"#hostModal","data-bs-toggle":"modal"}," Host Game Night ",-1)),oo={class:"navbar-text"},so={key:1,class:"dropdown my-2 my-lg-0"},no={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},io=["src"],lo={class:"mx-3 text-ep"},ro={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},co=U(()=>a("div",{class:"list-group-item list-group-item-action hoverable","data-bs-target":"#accountModal","data-bs-toggle":"modal"}," Manage Account ",-1)),mo=U(()=>a("i",{class:"mdi mdi-logout"},null,-1)),uo=A(" logout "),_o=[mo,uo];function go(s,e,t,o,l,r){const n=x("router-link"),v=x("hostModal"),Q=x("AccountModal");return d(),c(O,null,[a("nav",Ka,[Ya,a("div",Ja,[a("ul",Xa,[a("li",null,[y(n,{to:{name:"GameCloset"},class:"btn text-ep selectable text-uppercase text-light"},{default:L(()=>[Za]),_:1})]),a("li",null,[y(n,{to:{name:"Search"},class:"btn text-ep selectable text-uppercase text-light search-borders"},{default:L(()=>[eo]),_:1})]),a("li",null,[y(n,{to:{name:"GameNight"},class:"btn text-ep selectable text-uppercase text-light"},{default:L(()=>[to]),_:1})])]),ao,a("span",oo,[o.user.isAuthenticated?(d(),c("div",so,[a("div",no,[a("img",{src:o.account.picture,alt:"user photo",height:"40",class:"rounded-circle profile-img"},null,8,io),a("span",lo,u(o.account.name),1)]),a("div",ro,[co,a("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...D)=>o.logout&&o.logout(...D))},_o)])])):(d(),c("button",{key:0,class:"btn selectable text-ep text-light text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...D)=>o.login&&o.login(...D))}," Login "))])])]),y(v),y(Q)],64)}var ho=h(Fa,[["render",go],["__scopeId","data-v-4a5d9cf2"]]),po=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ho});const bo={setup(){return{}}},de=s=>(C("data-v-177e1b58"),s=s(),S(),s),vo={class:"offcanvas offcanvas-start rounded",tabindex:"-1","aria-labelledby":"offcanvasLabel"},yo={class:"offcanvas-header"},fo={class:"offcanvas-title col-md-10",id:"offcanvasLabel"},wo=de(()=>a("button",{type:"button",class:"btn-close text-reset col-md-2","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1)),Go=de(()=>a("div",{class:"grad"},null,-1)),xo={class:"offcanvas-body"};function $o(s,e,t,o,l,r){return d(),c("div",vo,[a("div",yo,[a("h5",fo,[M(s.$slots,"offcanvas-title",{},void 0,!0)]),wo]),Go,a("div",xo,[M(s.$slots,"offcanvas-body",{},void 0,!0)])])}var No=h(bo,[["render",$o],["__scopeId","data-v-177e1b58"]]),Co=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:No});const So={props:{player:{type:Object,required:!0}},setup(){return{account:g(()=>i.account),players:g(()=>i.players)}}},ko={class:"component"},Ao={key:0,class:"card p-2"},Ro=["src"];function To(s,e,t,o,l,r){var n;return d(),c("div",ko,[t.player.items?(d(),c("div",Ao,[a("h3",null,[a("img",{src:t.player.account.picture,alt:"player picture",class:"pic me-3"},null,8,Ro),A(u((n=t.player.account)==null?void 0:n.name),1)]),a("p",null,u(t.player.items),1)])):G("",!0)])}var Eo=h(So,[["render",To],["__scopeId","data-v-0a3092d3"]]),Io=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Eo});const Oo={props:{game:{type:Object}},setup(s){return{closetGames:g(()=>i.myGames.filter(e=>e.owned))}}},Mo=s=>(C("data-v-2f60057b"),s=s(),S(),s),Po={class:"component"},Qo=Mo(()=>a("p",null,"QR Code for rules",-1)),Do={class:"qrcode"},qo=["src"];function Lo(s,e,t,o,l,r){const n=x("vue-qrcode");return d(),c("div",Po,[Qo,a("figure",Do,[y(n,{value:t.game.rules_url,options:{errorCorrectionLevel:"Q",width:200,color:{dark:"#840196",light:"#ffffff"}}},null,8,["value"]),a("img",{class:"qrcode__image",src:t.game.image_url,alt:"game.name"},null,8,qo)])])}var jo=h(Oo,[["render",Lo],["__scopeId","data-v-2f60057b"]]),Bo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jo});const Vo={props:{gameNight:{type:Object}},setup(s){return{gameNight:g(()=>i.gameNights)}}},Uo=s=>(C("data-v-80bbd8fa"),s=s(),S(),s),zo={class:"component"},Ho=Uo(()=>a("p",null,"QR Code to join a Game Night",-1)),Wo={class:"qrcode"};function Fo(s,e,t,o,l,r){const n=x("vue-qrcode");return d(),c("div",zo,[Ho,a("figure",Wo,[y(n,{value:"http://localhost:8080/api/gamenight/"+o.gameNight.id,options:{errorCorrectionLevel:"Q",width:200,color:{dark:"#840196",light:"#ffffff"}}},null,8,["value"])])])}var Ko=h(Vo,[["render",Fo],["__scopeId","data-v-80bbd8fa"]]),Yo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ko});const Jo={props:{gameNight:{type:Object}},setup(s){return{gameNight:g(()=>i.gameNights)}}},Xo={class:"component"},Zo={class:"modal",tabindex:"-1",id:"qrCodeModal"},es={class:"modal-dialog"},ts={class:"modal-content"},as=a("div",{class:"modal-header"},[a("h5",{class:"modal-title"},"Join Game Night"),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),os={class:"modal-body"},ss=a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),a("button",{type:"button",class:"btn btn-primary"},"Save changes")],-1);function ns(s,e,t,o,l,r){const n=x("QRCodeJoin");return d(),c("div",Xo,[a("div",Zo,[a("div",es,[a("div",ts,[as,a("div",os,[y(n,{gameNight:o.gameNight},null,8,["gameNight"])]),ss])])])])}var is=h(Jo,[["render",ns]]),ls=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:is});class rs{async addToGameQueue(e){await m.post("api/gamequeue",e)}async removeGameQueue(e){await m.delete(`api/gamequeue/${e}`),i.gameQueue=i.gameQueue.filter(t=>t.id!==e)}async getAllGameQueue(e){const t=await m.get(`api/gamenight/${e}/gamequeue`);i.gameQueue=t.data}async vote(e){await m.put(`api/gamequeue/${e}/votes`)}sortByVote(e){return e.sort((t,o)=>t.vote<o.vote?-1:t.vote>o.vote?1:0)}}const cs=new rs;class ds{async attendGameNight(e){await m.post(`api/players/${e}`)}async unattendGameNight(e){await m.delete(`api/players/${e}`)}async editMyItems(e){const o=(await m.put(`api/players/${e.id}`,e)).data,l=i.players.findIndex(r=>r.id===e.id);if(l===-1){i.players.push(o);return}i.players.splice(l,1,o)}async getGameNightsImAttending(){const e=await m.get("account/players");i.myAttending=e.data}}const ms=new ds,us={setup(){let s=X();$({});const e=$("Choose a game!"),t=K({editable:{}});return{closetGames:g(()=>i.myGames.filter(o=>o.owned)),gameQueue:e,state:t,async createGameNight(){try{const o=e.value;_.log("create",t.editable,"gameQueue",o),await V.createGameNight(t.editable);const l=i.activeGameNight;await ms.attendGameNight(l.pin);const r=i.myGames.find(v=>v.name===o);_.log("Active GameNight",i.activeGameNight),_.log("Player",i.players);let n={gameId:r.id,gameNightId:i.activeGameNight.id};await cs.addToGameQueue(n),s.push({name:"GameNightDetails",params:{id:i.activeGameNight.id}}),t.editable={}}catch(o){_.error(o),p.toast(o.message,"error")}}}}},_s={class:"modal fade",id:"hostModal","aria-hidden":"true","aria-labelledby":"hostModal",tabindex:"-1"},gs={class:"modal-dialog modal-dialog-centered"},hs={class:"modal-content"},ps=a("div",{class:"modal-header bg-secondary"},[a("h5",{class:"modal-title",id:"exampleModalToggleLabel"}," Host a Game Night "),a("button",{type:"button",class:"btn-close bg-secondary","data-bs-dismiss":"modal","aria-label":"Close"})],-1),bs={class:"modal-body"},vs={class:"row"},ys={class:"col m-2"},fs={class:"row"},ws={class:"col m-2"},Gs={class:"row"},xs={class:"col m-2"},$s={class:"dropdown mx-4 my-2"},Ns={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",required:""},Cs={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Ss=["onClick"],ks=a("div",{class:"modal-footer"},[a("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Create ")],-1);function As(s,e,t,o,l,r){return d(),c("div",_s,[a("div",gs,[a("div",hs,[ps,a("form",{onSubmit:e[3]||(e[3]=N(n=>o.createGameNight(),["prevent"]))},[a("div",bs,[a("div",vs,[a("div",ys,[f(a("input",{type:"text","aria-label":"name",placeholder:"Name your game night",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>o.state.editable.name=n),required:""},null,512),[[w,o.state.editable.name]])])]),a("div",fs,[a("div",ws,[f(a("input",{type:"text","aria-label":"location",placeholder:"Location",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>o.state.editable.location=n),required:""},null,512),[[w,o.state.editable.location]])])]),a("div",Gs,[a("div",xs,[f(a("input",{type:"datetime-local","aria-label":"date",placeholder:"Date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>o.state.editable.gameNightDate=n),required:""},null,512),[[w,o.state.editable.gameNightDate]])])]),a("div",$s,[a("button",Ns,u(o.gameQueue),1),a("ul",Cs,[(d(!0),c(O,null,ee(o.closetGames,n=>(d(),c("li",{key:n.atlasGameId},[a("div",{class:"dropdown-item selectable",onClick:v=>o.gameQueue=n.name},u(n.name),9,Ss)]))),128))])])]),ks],32)])])])}var Rs=h(us,[["render",As]]),Ts=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Rs});function Es(s){Object.entries({"./components/AccountModal.vue":Ve,"./components/AddRulesForm.vue":ot,"./components/EditForm.vue":ft,"./components/Game.vue":sa,"./components/GameDetails.vue":ka,"./components/Modal.vue":qa,"./components/Navbar.vue":po,"./components/OffCanvas.vue":Co,"./components/PlayerItems.vue":Io,"./components/QRCodeGame.vue":Bo,"./components/QRCodeJoin.vue":Yo,"./components/QRCodeModal.vue":ls,"./components/hostModal.vue":Ts}).forEach(([t,o])=>{const l=o.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");s.component(l,o.default)})}const z=fe(Ne);Es(z);z.component(te.name,te);z.use(re).mount("#app");export{i as A,Eo as P,h as _,p as a,V as b,k as c,b as d,cs as g,_ as l,ms as p,ce as s};
