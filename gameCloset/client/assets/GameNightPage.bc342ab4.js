import{_ as E,c as u,d as M,l as m,a as l,A as r,b as A}from"./index.304b9ef4.js";import{g as j,u as I,r as F,G as T,c as y,a as p,o as a,b as i,d as t,h as P,i as V,v as B,F as f,x,e as _,p as q,q as z,B as k,C as N,z as g,t as c,s as H}from"./vendor.4a4b261e.js";const L={setup(){const d=j(""),h=I(),b=F({editable:{}});return T(async()=>{try{await u.getMyGameNights("/account/gamenight"),await M.getMyGames("/account/myGames")}catch(e){m.error(e),l.toast(e.message,"error")}}),{search:d,state:b,closetGames:y(()=>r.myGames.filter(e=>e.owned)),myGameNights:y(()=>r.myGameNights),myAttendance:y(()=>r.myAttendance),account:y(()=>r.account),async deleteGameNight(e){try{if(!await l.confirm("Delete your game night?"))return;const v=await u.delete(e);l.toast("Deleted","success")}catch(o){m.error(o),l.toast("Something went wrong deleting this GameNight!","error")}},async cancelGameNight(e){try{if(!await l.confirm("Cancel your game night?"))return;await u.cancel(e),l.toast("You've canceled your event.","success"),this.addXp()}catch(o){m.error(o),l.toast(o.message,"error")}},async addXp(){let e=r.account;e.xp-=25,e.xp>=640?e.rank="Noob-Slayer":e.xp>=320?e.rank="Royalty":e.xp>=160?e.rank="Champion":e.xp>=80?e.rank="Knight":e.xp>=40&&(e.rank="Squire"),m.log("xp",e),await A.edit(e)},async findGameNight(){try{await u.findGameNight(d.value)?(d.value="",h.push({name:"GameNightDetails",params:{id:r.activeGameNight.id}})):l.toast("No game night found","error")}catch(e){m.error(e)}},setActive(e){r.activeGameNight=e},formatDate(e){return new Date(e).toLocaleString()},compareDate(e){let o=Date.parse(e),v=Date.now();if(v>o)return"This game night has passed.";if(v<o)return""}}}},n=d=>(q("data-v-0abe9dd6"),d=d(),z(),d),R={class:"gameNight container-fluid p-5"},X=n(()=>t("div",{class:"row"},[t("div",{class:"col text-center"},[t("h1",{class:"text-light"},"GAME NIGHTS")])],-1)),J={class:"row"},K={class:"col-md-3 my-3 text-center"},O={class:"input-group mb-3"},U=n(()=>t("button",{class:"btn btn-outline-light",title:"Find Game"}," Find Game ",-1)),Y=n(()=>t("div",{class:"col-md-3 ms-auto my-3 text-end"},[t("button",{class:"btn btn-outline-light","data-bs-toggle":"modal","data-bs-target":"#hostModal"}," Host ")],-1)),Q=n(()=>t("h3",{class:"text-light"},"Hosted Game Nights:",-1)),W={class:"col"},Z={class:"row justify-content-center"},$={class:"col-md-8 mt-3 card elevation-2 selectable grow",title:"Game Night Details"},tt={class:"row"},et={class:"col"},st={class:"col text-end dropdown"},ot=n(()=>t("i",{class:"rounded p-2 mdi mdi-dots-horizontal mdi-24px text-dark selectable dropdown-toggle","data-bs-toggle":"dropdown",title:"Options"},null,-1)),at={class:"dropdown-menu"},it=["data-bs-target"],ct=n(()=>t("button",{class:"dropdown-item selectable text-primary"}," Edit Event ",-1)),nt=[ct],dt=["onClick"],lt=["onClick"],rt={class:"row"},ht={class:"col-6 mt-2"},mt={class:"col-6 mt-2 text-end"},_t={key:0,class:"row justify-content-center"},gt={class:"col-md-6 my-3"},vt={class:"row"},ut={class:"col"},yt={class:"text-danger"},pt={class:"row"},Nt={class:"col"},wt={key:1,class:"row justify-content-center text-danger"},ft=n(()=>t("div",{class:"col-md-6 my-3"},[t("div",{class:"row"},[t("div",{class:"col"},[t("h5",null,"This game night has been canceled.")])])],-1)),bt=[ft],Gt=H("Edit your game night!"),xt={class:"row"},kt={class:"col"},Dt=n(()=>t("h3",{class:"text-light my-4"},"Joined Game Nights:",-1)),Ct={key:0,class:"col"},St={class:"row justify-content-center"},Et={class:"col-md-8 m-3 card elevation-2 selectable grow",title:"Game Night Details"},Mt={class:"row"},At={class:"col"},jt={class:"row"},It={class:"col-6 mt-2"},Ft={class:"col-6 mt-2 text-end"},Tt={key:0,class:"row justify-content-center"},Pt={class:"col-md-6 my-3"},Vt={class:"row"},Bt={class:"col"},qt={class:"text-danger"},zt={class:"row"},Ht={class:"col"},Lt={key:1,class:"row justify-content-center text-danger"},Rt=n(()=>t("div",{class:"col-md-6 my-3"},[t("div",{class:"row"},[t("div",{class:"col"},[t("h5",null,"This game night has been canceled.")])])],-1)),Xt=[Rt];function Jt(d,h,b,e,o,v){const G=p("router-link"),D=p("EditForm"),C=p("Modal"),S=p("hostModal");return a(),i(f,null,[t("div",R,[X,t("div",J,[t("div",K,[t("form",{onSubmit:h[1]||(h[1]=P((...s)=>e.findGameNight&&e.findGameNight(...s),["prevent"]))},[t("div",O,[V(t("input",{required:"","onUpdate:modelValue":h[0]||(h[0]=s=>e.search=s),type:"text",class:"form-control",placeholder:"Enter code...","aria-label":"Enter code...","aria-describedby":"button-addon2",maxlength:"6"},null,512),[[B,e.search]]),U])],32)]),Y]),Q,(a(!0),i(f,null,x(e.myGameNights,s=>(a(),i("div",{class:"row",key:s.id},[t("div",W,[t("div",Z,[t("div",$,[t("div",tt,[t("div",et,[t("div",st,[ot,t("ul",at,[t("li",{"data-bs-toggle":"modal","data-bs-target":"#editGameNight-"+s.id},nt,8,it),t("li",null,[t("button",{class:"dropdown-item selectable text-primary",onClick:w=>e.cancelGameNight(s.id)}," Cancel Event ",8,dt)]),t("li",null,[t("button",{class:"dropdown-item selectable text-danger",onClick:w=>e.deleteGameNight(s.id)}," Delete Event ",8,lt)])])])])]),t("div",null,[t("div",{class:k(s.isCanceled?"disabled":"")},[_(G,{to:{name:"GameNightDetails",params:{id:s.id}},onClick:w=>e.setActive(s)},{default:N(()=>[t("div",rt,[t("div",ht,[t("h4",null,c(s.name),1)]),t("div",mt,[t("h5",null,"Game Pin: "+c(s.pin),1)])]),s.isCanceled?g("",!0):(a(),i("div",_t,[t("div",gt,[t("div",vt,[t("div",ut,[t("h3",yt,c(e.compareDate(s.gameNightDate)),1),t("h5",null,c(e.formatDate(s.gameNightDate)),1)])]),t("div",pt,[t("div",Nt,[t("h5",null,c(s.location),1)])])])])),s.isCanceled?(a(),i("div",wt,bt)):g("",!0)]),_:2},1032,["to","onClick"])],2)])])])]),_(C,{id:"editGameNight-"+s.id},{"modal-title":N(()=>[Gt]),"modal-body":N(()=>[_(D,{gameNight:s},null,8,["gameNight"])]),_:2},1032,["id"])]))),128)),t("div",xt,[t("div",kt,[Dt,(a(!0),i(f,null,x(e.myAttendance,s=>(a(),i("div",{class:"row",key:s.gameNightId},[s.gameNight.accountId!==e.account.id?(a(),i("div",Ct,[t("div",St,[t("div",Et,[t("div",Mt,[t("div",At,[t("div",null,[t("div",{class:k(s.gameNight.isCanceled?"disabled":"")},[_(G,{to:{name:"GameNightDetails",params:{id:s.gameNightId}},onClick:w=>e.setActive(s.gameNight)},{default:N(()=>[t("div",jt,[t("div",It,[t("h4",null,c(s.gameNight.name),1)]),t("div",Ft,[t("h5",null,"Game Pin: "+c(s.gameNight.pin),1)])]),s.gameNight.isCanceled?g("",!0):(a(),i("div",Tt,[t("div",Pt,[t("div",Vt,[t("div",Bt,[t("h3",qt,c(e.compareDate(s.gameNight.gameNightDate)),1),t("h5",null,c(e.formatDate(s.gameNight.gameNightDate)),1)])]),t("div",zt,[t("div",Ht,[t("h5",null,c(s.gameNight.location),1)])])])])),s.gameNight.isCanceled?(a(),i("div",Lt,Xt)):g("",!0)]),_:2},1032,["to","onClick"])],2)])])])])])])):g("",!0)]))),128))])])]),_(S)],64)}var Ut=E(L,[["render",Jt],["__scopeId","data-v-0abe9dd6"]]);export{Ut as default};
