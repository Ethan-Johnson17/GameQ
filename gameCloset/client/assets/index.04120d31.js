var _e=Object.defineProperty;var F=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var J=(o,e,t)=>e in o?_e(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,X=(o,e)=>{for(var t in e||(e={}))ge.call(e,t)&&J(o,t,e[t]);if(F)for(var t of F(e))he.call(e,t)&&J(o,t,e[t]);return o};import{r as Z,c as g,a as x,b as c,d as s,e as $,F as P,o as r,f as ee,S as te,u as j,g as G,w as B,M as U,h as N,i as y,v as b,j as pe,k as fe,l as O,m as ve,n as ye,t as _,p as C,q as k,s as V,x as ae,y as be,z as w,A as Q,B as D,C as z,D as we,E as se}from"./vendor.4a4b261e.js";const $e=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const n of d.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerpolicy&&(d.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?d.credentials="include":l.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(l){if(l.ep)return;l.ep=!0;const d=t(l);fetch(l.href,d)}};$e();const i=Z({user:{},account:{},atlasGames:[],myGames:[],activeGameNight:{},myGameNights:[],players:[],gameQueue:[],myAttendance:[],gameNights:{}});var p=(o,e)=>{for(const[t,a]of e)o[t]=a;return o};const Ge={name:"App",setup(){return{appState:g(()=>i)}}},xe=s("footer",null,null,-1);function Ne(o,e,t,a,l,d){const n=x("Navbar"),v=x("router-view");return r(),c(P,null,[s("header",null,[$(n)]),s("main",null,[$(v)]),xe],64)}var Ce=p(Ge,[["render",Ne]]);const oe=window.location.origin.includes("localhost"),H=oe?"http://localhost:3000":"",ke="kylee-marlin.us.auth0.com",Se="mpXgASnPybMqw6Qp3lKxL9QNqXVp7ylk",Ae="https://CoolStuff.com";function E(o,e){if(oe)console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(o){case"log":case"assert":return}console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const u={log(){E("log",arguments)},error(){E("error",arguments)},warn(){E("warn",arguments)},assert(){E("assert",arguments)},trace(){E("trace",arguments)}},m=ee.create({baseURL:H,timeout:8e3}),Re=ee.create({baseURL:"https://api.boardgameatlas.com/api",timeout:8e3});class Ie{async getAccount(){try{const e=await m.get("/account");i.account=e.data}catch(e){u.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async edit(e){const t=await m.put("account/",e);i.account=t.data,u.log("post",t.data.xp)}}const T=new Ie;class h{static async confirm(e="Are you sure?",t="You won't be able to revert this!",a="warning",l="Yes, delete it!"){try{return!!(await te.fire({title:e,text:t,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:l})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",a="top-end",l=3e3,d=!0){te.fire({title:e,icon:t,position:a,timer:l,timerProgressBar:d,toast:!0,showConfirmButton:!1})}}const Oe={setup(){j();const o=G({});return B(()=>{o.value={}}),{editable:o,async edit(){try{await T.edit(o.value),U.getOrCreateInstance(document.getElementById("accountModal")).hide()}catch(e){u.error(e),h.toast("Failed to Edit","error")}}}}},Ee={class:"modal fade",id:"accountModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Te={class:"modal-dialog"},Me={class:"modal-content"},Pe=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"exampleModalLabel"},"Edit account"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qe={class:"modal-body"},De={class:"mb-3 d-flex justify-content-between"},Le=s("label",{for:"picture",class:"form-label"},"Picture",-1),qe=s("label",{for:"name",class:"form-label"},"Name",-1),je=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-primary"}," Save ")],-1);function Be(o,e,t,a,l,d){return r(),c("div",Ee,[s("div",Te,[s("div",Me,[Pe,s("div",Qe,[s("form",{onSubmit:e[2]||(e[2]=N((...n)=>a.edit&&a.edit(...n),["prevent"]))},[s("div",De,[s("div",null,[Le,y(s("input",{type:"url",class:"form-control",name:"picture",id:"picture","aria-describedby":"picture",placeholder:"picture...","onUpdate:modelValue":e[0]||(e[0]=n=>a.editable.picture=n)},null,512),[[b,a.editable.picture]])]),s("div",null,[qe,y(s("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"name",placeholder:"Name...","onUpdate:modelValue":e[1]||(e[1]=n=>a.editable.name=n)},null,512),[[b,a.editable.name]])])]),je],32)])])])])}var Ue=p(Oe,[["render",Be]]),Ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ue});const ze="modulepreload",ne={},He="/",R=function(e,t){return!t||t.length===0?e():Promise.all(t.map(a=>{if(a=`${He}${a}`,a in ne)return;ne[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const n=document.createElement("link");if(n.rel=l?"stylesheet":ze,l||(n.as="script",n.crossOrigin=""),n.href=a,document.head.appendChild(n),l)return new Promise((v,q)=>{n.addEventListener("load",v),n.addEventListener("error",q)})})).then(()=>e())};function We(o){switch(o){case"./pages/AboutPage.vue":return R(()=>import("./AboutPage.87ec76d7.js"),["assets/AboutPage.87ec76d7.js","assets/vendor.4a4b261e.js"]);case"./pages/AccountPage.vue":return R(()=>import("./AccountPage.6fa27974.js"),["assets/AccountPage.6fa27974.js","assets/AccountPage.1d38451d.css","assets/vendor.4a4b261e.js"]);case"./pages/ActiveGameNightPage.vue":return R(()=>import("./ActiveGameNightPage.7e1ba898.js"),["assets/ActiveGameNightPage.7e1ba898.js","assets/ActiveGameNightPage.01233e18.css","assets/vendor.4a4b261e.js"]);case"./pages/GameClosetPage.vue":return R(()=>import("./GameClosetPage.5863fe15.js"),["assets/GameClosetPage.5863fe15.js","assets/GameClosetPage.ee23e09d.css","assets/vendor.4a4b261e.js"]);case"./pages/GameNightPage.vue":return R(()=>import("./GameNightPage.f4311993.js"),["assets/GameNightPage.f4311993.js","assets/GameNightPage.39fc4bb0.css","assets/vendor.4a4b261e.js"]);case"./pages/SearchPage.vue":return R(()=>import("./SearchPage.d0946ba0.js"),["assets/SearchPage.d0946ba0.js","assets/SearchPage.68c053c5.css","assets/vendor.4a4b261e.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function M(o){return()=>We(`./pages/${o}.vue`)}const Ke=[{path:"/",name:"GameCloset",component:M("GameClosetPage"),beforeEnter:O},{path:"/search",name:"Search",component:M("SearchPage"),beforeEnter:O},{path:"/gameNight",name:"GameNight",component:M("GameNightPage"),beforeEnter:O},{path:"/gameNight/:id",name:"GameNightDetails",component:M("ActiveGameNightPage"),beforeEnter:O},{path:"/account",name:"Account",component:M("AccountPage"),beforeEnter:O}],ie=pe({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:fe(),routes:Ke}),L={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Ye{constructor(e=!1,t=H){this.socket=ve(t||H),this.requiresAuth=e,this.queue=[],this.authenticated=!1,this.on(L.connected,this.onConnected).on(L.authenticated,this.onAuthenticated).on(L.error,this.onError)}on(e,t){var a;return(a=this.socket)==null||a.on(e,t.bind(this)),this}onConnected(e){u.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){u.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(L.authenticate,e)}joinRoom(e){var t;(t=this.socket)==null||t.emit("Join_Room",`Game${e}Night`),u.log("Joined_Room",e)}onError(e){u.error("[SOCKET_ERROR]",e)}enqueue(e,t){u.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){u.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class Fe{async createGameNight(e){const t=await m.post("api/gamenight",e);i.activeGameNight=t.data,i.myGameNights.push(t.data)}async getMyGameNights(e=""){const t=await m.get(e),a=await m.get("account/players");let l=this.sortByDate(t.data),d=this.sortByDate(a.data);i.myGameNights=l,i.myAttendance=d}sortByDate(e){return e.sort((t,a)=>t.gameNightDate<a.gameNightDate?-1:t.gameNightDate>a.gameNightDate?1:0)}async delete(e){await m.delete("/api/gamenight/"+e),i.myGameNights=i.myGameNights.filter(t=>t.id!==e)}async cancel(e){let t=i.myGameNights;const l=(await m.put(`api/gamenight/${e}/isCanceled`)).data,d=i.myGameNights.findIndex(n=>n.id===l.id);d===-1&&i.myGameNights.unshift(l),t.splice(d,1,l)}async edit(e,t){const l=(await m.put(`api/gamenight/${e}`,t)).data,d=i.myGameNights.findIndex(n=>n.id===l.id);d===-1&&i.myGameNights.unshift(l),i.myGameNights.splice(d,1,l)}async findGameNight(e=""){const t=await m.get(`api/gamenight/pin/${e}`);return i.activeGameNight=t.data,t.data}async findGameNightId(e){const t=await m.get(`api/gamenight/${e}`);i.activeGameNight=t.data,u.log(t.data)}async getAllPlayers(e){const t=await m.get(`api/gamenight/${e}/players`);i.players=t.data}}const W=new Fe;class Je extends Ye{constructor(){super();this.on("error",this.onError).on("New Game Que",this.newGameQ).on("Removed Game Que",this.removedGameQ).on("Votes on Game Que",this.votes).on("Attending Game Night",this.newPlayer).on("Leaving Game Night",this.deletePlayer).on("Bringing Game Night",this.bringing)}newGameQ(e){i.gameQueue.push(e)}removedGameQ(e){i.gameQueue=i.gameQueue.filter(t=>t.id!==e)}votes(e){let t=i.gameQueue.findIndex(a=>a.id===e.id);i.gameQueue.splice(t,1,e)}newPlayer(e){i.players=[...i.players,e]}deletePlayer(e){i.players=i.players.filter(t=>t.id!==e.id),i.gameQueue=i.gameQueue.filter(t=>t.accountId!==e.accountId)}bringing(e){let t=i.players.findIndex(a=>a.id===e.id);if(t===-1){i.players.push(e);return}i.players.splice(t,1,e)}onError(e){h.toast(e.message,"error")}}const le=new Je,f=ye({domain:ke,clientId:Se,audience:Ae,useRefreshTokens:!0,onRedirectCallback:o=>{ie.push(o&&o.targetUrl?o.targetUrl:window.location.pathname)}});f.on(f.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=f.bearer,m.interceptors.request.use(Xe),i.user=f.user,await T.getAccount(),le.authenticate(f.bearer)});async function Xe(o){if(!f.isAuthenticated)return o;const e=f.identity.exp*1e3,t=e<Date.now(),a=e<Date.now()+1e3*60*60*12;return t?await f.loginWithPopup():a&&(await f.getTokenSilently(),m.defaults.headers.authorization=f.bearer,le.authenticate(f.bearer)),o}const Ze={setup(){const o=G({}),e=j();return B(()=>{o.value={}}),{account:g(()=>i.account),editable:o,async edit(){try{await T.edit(o.value)}catch(t){u.error(t),h.toast("Failed to Edit","error")}},async logout(){e.push({name:"GameCloset"}),f.logout()}}}},I=o=>(C("data-v-974d0900"),o=o(),k(),o),et={class:"AccountOffcanvas"},tt={class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},at=I(()=>s("div",{class:"offcanvas-header"},[s("h5",{id:"offcanvasRightLabel"},"Manage Your Account"),s("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1)),st={class:"offcanvas-body"},ot={class:"row text-center"},nt={class:"col"},it=["src"],lt={class:"row"},ct=I(()=>s("h5",{class:"mt-4"},"Edit Your Account Info",-1)),rt={class:"mt-4"},dt=I(()=>s("label",{for:"picture",class:"form-label"},"Account Picture",-1)),mt={class:"mt-4"},ut=I(()=>s("label",{for:"name",class:"form-label"},"Account Name",-1)),_t=I(()=>s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"offcanvas"}," Close "),s("button",{type:"submit",class:"btn btn-primary"},"Save")],-1)),gt={class:"d-flex flex-column m-3"},ht=I(()=>s("i",{class:"mdi mdi-logout"},null,-1)),pt=V(" logout "),ft=[ht,pt];function vt(o,e,t,a,l,d){return r(),c("div",et,[s("div",tt,[at,s("div",st,[s("div",ot,[s("div",nt,[s("img",{src:a.account.picture,alt:"user photo",class:"rounded-circle profile-img"},null,8,it),s("h3",null,_(a.account.name),1)])]),s("form",{onSubmit:e[2]||(e[2]=N((...n)=>a.edit&&a.edit(...n),["prevent"]))},[s("div",lt,[ct,s("div",rt,[dt,y(s("input",{type:"url",class:"form-control",name:"picture",id:"picture","aria-describedby":"picture",placeholder:"picture...","onUpdate:modelValue":e[0]||(e[0]=n=>a.editable.picture=n)},null,512),[[b,a.editable.picture]])]),s("div",mt,[ut,y(s("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"name",placeholder:"Name...","onUpdate:modelValue":e[1]||(e[1]=n=>a.editable.name=n)},null,512),[[b,a.editable.name]])])]),_t],32)]),s("div",gt,[s("button",{class:"btn btn-danger btn-lg text-light mt-auto",onClick:e[3]||(e[3]=(...n)=>a.logout&&a.logout(...n))},ft)])])])}var yt=p(Ze,[["render",vt],["__scopeId","data-v-974d0900"]]),bt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:yt});class ce{constructor(e){this.name=e.name,this.owned=e.owned||!1,this.accountId=e.accountId,this.atlasUrl=e.url||e.atlasUrl,this.description=e.description,this.houseRules=e.houseRules,this.rules_url=e.rules_url,this.atlasGameId=e.atlasGameId||e.id,this.id=e._id,this.min_players=e.min_players,this.max_players=e.max_players,this.price=e.price,this.min_playtime=e.min_playtime,this.max_playtime=e.max_playtime,this.image_url=e.image_url,this.min_age=e.min_age}}const wt="&client_id=RhH4WBOfK3";class $t{async getAll(e=""){const t=await Re.get(e+"&limit=24"+wt);i.atlasGames=t.data.games.map(a=>new ce(a))}async getMyGames(e=""){const t=await m.get(e);i.myGames=t.data.map(a=>new ce(a))}async addToWishlist(e){if(i.myGames.find(a=>a.atlasUrl==e.atlasUrl))h.toast("Already in wishlist.","error");else{const a=await m.post("api/games",e);i.myGames.unshift(a.data)}}async addToGameCloset(e){if(e.id)await m.put("api/games/"+e.id,e);else{const t=await m.post("api/games",e);i.myGames.unshift(t.data)}}async addRules(e,t){await m.put("api/games/"+e,t)}async remove(e){await m.delete("api/games/"+e),i.myGames=i.myGames.filter(t=>t.id!==e)}}const S=new $t;const Gt={props:{game:{type:Object}},setup(o){const e=G({});return{editable:e,closetGames:g(()=>i.myGames.filter(t=>t.owned)),myGameNights:g(()=>i.myGameNights),account:g(()=>i.account),async addRules(t){try{await S.addRules(t,e.value),U.getOrCreateInstance(document.getElementById("addRules-"+t)).hide(),await S.getMyGames("/account/myGames")}catch(a){u.log(a),h.toast(a.message,"error")}}}}},K=o=>(C("data-v-b7a60da2"),o=o(),k(),o),xt={class:"modal-body"},Nt={class:"row"},Ct={class:"col m-2"},kt=K(()=>s("h6",null,"Add Official Rules with a link:",-1)),St={class:"row"},At={class:"col m-2"},Rt=K(()=>s("h6",null,"Add House Rules:",-1)),It=K(()=>s("div",{class:"modal-footer"},[s("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Save Changes ")],-1));function Ot(o,e,t,a,l,d){return r(),c("form",{onSubmit:e[2]||(e[2]=N(n=>a.addRules(t.game.id),["prevent"]))},[s("div",xt,[s("div",Nt,[s("div",Ct,[kt,y(s("input",{type:"url","aria-label":"OfficialRulesURL",placeholder:"Add Link to Official Rules",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>a.editable.rules_url=n)},null,512),[[b,a.editable.rules_url]])])]),s("div",St,[s("div",At,[Rt,y(s("textarea",{type:"text","aria-label":"HouseRules",placeholder:"Add House Rules",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>a.editable.houseRules=n)},null,512),[[b,a.editable.houseRules]])])])]),It],32)}var Et=p(Gt,[["render",Ot],["__scopeId","data-v-b7a60da2"]]),Tt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Et});const Mt={props:{gameNight:{type:Object}},setup(o){const e=G({}),t=G("Pick a game");return B(async()=>{try{e.value=X({},o.gameNight)}catch(a){u.error(a),h.toast(a.message,"error")}}),{editable:e,gameQueue:t,closetGames:g(()=>i.myGames.filter(a=>a.owned)),myGameNights:g(()=>i.myGameNights),account:g(()=>i.account),async editGameNight(a){try{await W.edit(a,e.value),u.log("editable.value",e.value,"gameNightId",a),U.getOrCreateInstance(document.getElementById("editGameNight-"+a)).hide(),await W.getMyGameNights("/account/gamenight")}catch(l){h.toast(l.message,"error")}}}}},Pt={class:"modal-body"},Qt={class:"row"},Dt={class:"col m-2"},Lt={class:"row"},qt={class:"col m-2"},jt={class:"row"},Bt={class:"col m-2"},Ut={class:"dropdown mx-4 my-2",hidden:""},Vt={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},zt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Ht=["onClick"],Wt=s("div",{class:"modal-footer"},[s("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Save Changes ")],-1);function Kt(o,e,t,a,l,d){return r(),c("form",{onSubmit:e[3]||(e[3]=N(n=>a.editGameNight(t.gameNight.id),["prevent"]))},[s("div",Pt,[s("div",Qt,[s("div",Dt,[y(s("input",{type:"text","aria-label":"name",placeholder:"Name your game night",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>a.editable.name=n),required:""},null,512),[[b,a.editable.name]])])]),s("div",Lt,[s("div",qt,[y(s("input",{type:"text","aria-label":"location",placeholder:"Location",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>a.editable.location=n),required:""},null,512),[[b,a.editable.location]])])]),s("div",jt,[s("div",Bt,[y(s("input",{type:"datetime-local","aria-label":"date",placeholder:"Date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>a.editable.gameNightDate=n),required:""},null,512),[[b,a.editable.gameNightDate]])])]),s("div",Ut,[s("button",Vt,_(a.gameQueue),1),s("ul",zt,[(r(!0),c(P,null,ae(a.closetGames,n=>(r(),c("li",{key:n.atlasGameId},[s("div",{class:"dropdown-item selectable",onClick:v=>a.gameQueue=n.name},_(n.name),9,Ht)]))),128))])])]),Wt],32)}var Yt=p(Mt,[["render",Kt]]),Ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Yt});const Jt={props:{game:{type:Object},isSearchResult:{type:Boolean,default:!1}},setup(o){const e=be();let t=G(!1);return{flipped:t,route:e,user:g(()=>i.user),account:g(()=>i.account),hasGame:g(()=>i.myGames.find(l=>l.atlasGameId===o.game.atlasGameId)),async addToWishlist(){try{const a=o.game,l=await S.addToWishlist(a);h.toast("Added to Wishlist","success")}catch(a){h.toast("Already in your wishlist!:"+a.message,"error"),u.error(a)}},async addToGameCloset(){try{const a=o.game;a.owned=!0,document.getElementById(o.game.atlasGameId).classList.add("animate__bounce"),await S.addToGameCloset(a),h.toast("Added to Game Closet","success"),this.addXp()}catch(a){h.toast("Already in your closet!"+a.message,"error"),u.error(a)}},async addXp(){let a=i.account;a.xp+=10,a.xp>=640?a.rank="Noob-Slayer":a.xp>=320?a.rank="Royalty":a.xp>=160?a.rank="Champion":a.xp>=80?a.rank="Knight":a.xp>=40&&(a.rank="Squire"),u.log("xp",a),await T.edit(a)},async remove(a){try{if(!await h.confirm("Remove game?"))return;document.getElementById(o.game.atlasGameId).classList.add("animate__rollOut"),setTimeout(async()=>{await S.remove(a)},600)}catch(l){h.toast(l.message,"error"),u.error(l)}},flipCard(){t.value=!t.value,t.value?document.getElementById(o.game.atlasGameId).style.transform="rotateY(180deg)":document.getElementById(o.game.atlasGameId).style.transform="rotateY(0deg)"}}}},re=o=>(C("data-v-21579ec9"),o=o(),k(),o),Xt=["id"],Zt={class:"flip-card-front elevation-3"},ea={class:"container"},ta={class:"row"},aa={class:"col p-0"},sa=["src"],oa={class:"row"},na={class:"col text-center my-1"},ia={class:"col"},la={class:"flip-card-back elevation-3"},ca={class:"row"},ra={key:0,class:"col text-danger text-end"},da=re(()=>s("div",{class:"row"},[s("div",{class:"col"},[s("h3",{class:"my-4"},"Game Details")])],-1)),ma={key:0,class:"row"},ua={key:0,class:"col text-start mx-3"},_a={key:1,class:"col text-start ms-3"},ga={key:1,class:"row"},ha={key:0,class:"col text-start ms-3"},pa={key:1,class:"col text-start ms-3"},fa={key:2,class:"row"},va={key:0,class:"col text-start ms-3"},ya={class:"row"},ba={class:"col text-start mt-3 ms-3"},wa={key:0},$a=["href"],Ga={key:1},xa=["href"],Na={key:3,class:"row"},Ca={key:0,class:"col mt-3"},ka={key:0,class:"row"},Sa={key:1,class:"col m-2 text-danger"},Aa=re(()=>s("p",null,"Added",-1)),Ra=[Aa],Ia={key:1,class:"col mt-3"};function Oa(o,e,t,a,l,d){return r(),c("div",{class:"flip-card my-4 grow",onClick:e[7]||(e[7]=(...n)=>a.flipCard&&a.flipCard(...n))},[s("div",{class:"flip-card-inner selectable animate__animated",id:t.game.atlasGameId,style:{transform:"rotateY(0deg)"}},[s("div",Zt,[s("div",ea,[s("div",ta,[s("div",aa,[s("img",{class:"img-container m-2",src:t.game.image_url,alt:"",loading:"lazy"},null,8,sa)])]),s("div",oa,[s("div",na,[s("h3",ia,_(t.game.name),1)])])])]),s("div",la,[s("div",ca,[a.route.name=="GameCloset"?(r(),c("div",ra,[s("i",{class:"mdi mdi-trash-can-outline selectable mdi-24px p-2",onClick:e[0]||(e[0]=n=>a.remove(t.game.id))})])):w("",!0)]),da,t.game.min_playtime&&t.game.max_playtime?(r(),c("div",ma,[t.game.min_playtime===t.game.max_playtime?(r(),c("h4",ua," Play time: "+_(t.game.min_playtime)+" minutes ",1)):(r(),c("h4",_a," Play time: "+_(t.game.min_playtime)+" - "+_(t.game.max_playtime)+" minutes ",1))])):w("",!0),t.game.min_players&&t.game.max_players?(r(),c("div",ga,[t.game.min_players===t.game.max_players?(r(),c("h4",ha," Number of players: "+_(t.game.min_players),1)):(r(),c("h4",pa," Number of players: "+_(t.game.min_players)+" - "+_(t.game.max_players),1))])):w("",!0),t.game.owned?w("",!0):(r(),c("div",fa,[t.game.price>0?(r(),c("div",va,[s("h4",null,"Cost: $"+_(t.game.price),1)])):w("",!0)])),s("div",ya,[s("div",ba,[t.game.owned?(r(),c("h5",Ga,[s("a",{"data-bs-toggle":"offcanvas",href:"#gameDetails-"+t.game.id},"See More Details",8,xa)])):(r(),c("h5",wa,[s("a",{target:"_blank",href:t.game.atlasUrl},"See More Details",8,$a)]))])]),a.user.isAuthenticated?(r(),c("div",Na,[t.isSearchResult?(r(),c("div",Ca,[a.hasGame?(r(),c("div",Sa,Ra)):(r(),c("div",ka,[s("div",{class:"col-6 text-center",onClick:e[2]||(e[2]=N(()=>{},["stop"]))},[a.route.name=="Search"&&!t.game.owned?(r(),c("button",{key:0,onClick:e[1]||(e[1]=n=>a.addToWishlist(t.game)),class:"btn btn-secondary",title:"add to wishlist"}," Add to Wishlist ")):w("",!0)]),s("div",{class:"col-6 text-center px-2",onClick:e[4]||(e[4]=N(()=>{},["stop"]))},[t.game.owned?w("",!0):(r(),c("button",{key:0,class:"btn btn-secondary",title:"add to game closet",onClick:e[3]||(e[3]=n=>a.addToGameCloset(t.game))}," Add to Closet "))])]))])):(r(),c("div",Ia,[s("div",{class:"text-end",onClick:e[6]||(e[6]=N(()=>{},["stop"]))},[t.game.owned?w("",!0):(r(),c("button",{key:0,class:"btn btn-secondary me-3",title:"add to game closet",onClick:e[5]||(e[5]=n=>a.addToGameCloset(t.game))}," Add to Closet "))])]))])):w("",!0)])],8,Xt)])}var Ea=p(Jt,[["render",Oa],["__scopeId","data-v-21579ec9"]]),Ta=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ea});const Ma={props:{game:{type:Object}},setup(o){return{editable:G({}),closetGames:g(()=>i.myGames.filter(t=>t.owned)),async addRules(t){try{let a=t.target.innerText,l=o.game.id,d={houseRules:a};await S.addRules(l,d),await S.getMyGames("/account/myGames")}catch(a){u.log(a),h.toast(a.message,"error")}}}}},de=o=>(C("data-v-1f06305c"),o=o(),k(),o),Pa={class:"offcanvas-body p-1"},Qa={class:"col text-center"},Da=["src","alt"],La={class:"col my-2"},qa={key:0,class:"col"},ja={key:1,class:"col"},Ba={class:"col"},Ua=["innerHTML"],Va={class:"accordion mb-5 col mt-3",id:"accordionExample"},za={class:"accordion-item bgColor"},Ha=de(()=>s("h2",{class:"accordion-header",id:"headingOne"},[s("button",{class:"accordion-button bg-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Official Rules ")],-1)),Wa={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},Ka={key:0,class:"accordion-body"},Ya=["href"],Fa={key:1,class:"accordion-body"},Ja=["data-bs-target"],Xa=["data-bs-target"],Za={class:"accordion-item bgColor"},es=de(()=>s("h2",{class:"accordion-header",id:"headingTwo"},[s("button",{class:"accordion-button collapsed bg-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," House Rules ")],-1)),ts={id:"collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample"};function as(o,e,t,a,l,d){const n=x("QRCodeGame");return r(),c("div",Pa,[s("div",Qa,[s("img",{class:"img-container m-2",src:t.game.image_url,alt:t.game.name},null,8,Da)]),s("div",La,[s("h2",null,_(t.game.name),1)]),t.game.min_players!==t.game.max_players?(r(),c("div",qa,_(t.game.min_players)+" to "+_(t.game.max_players)+" players ",1)):(r(),c("div",ja,_(t.game.min_players)+" players",1)),s("div",Ba,_(t.game.min_playtime)+" to "+_(t.game.max_playtime)+" minute playtime ",1),s("div",{class:"col mt-2",innerHTML:t.game.description},null,8,Ua),s("div",Va,[s("div",za,[Ha,s("div",Wa,[t.game.rules_url?(r(),c("div",Ka,[s("a",{target:"_blank",href:t.game.rules_url},_(t.game.name)+" Rules",9,Ya),$(n,{game:t.game},null,8,["game"])])):(r(),c("div",Fa,[s("p",null,[V(" No "+_(t.game.name)+" rules found. ",1),s("span",{"data-bs-toggle":"modal","data-bs-target":"#addRules-"+t.game.id,class:"selectable"},"Add now?",8,Ja)]),s("i",{class:"mdi mdi-plus-thick text-secondary selectable btn","data-bs-toggle":"modal","data-bs-target":"#addRules-"+t.game.id,title:"Add Official Rules"}," Add Rules",8,Xa)]))])]),s("div",Za,[es,s("div",ts,[s("div",{class:"accordion-body hover",contenteditable:"",onBlur:e[0]||(e[0]=(...v)=>a.addRules&&a.addRules(...v))},_(t.game.houseRules),33)])])])])}var ss=p(Ma,[["render",as],["__scopeId","data-v-1f06305c"]]),os=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ss});const ns={setup(){return{}}},is={class:"modal",tabindex:"-1"},ls={class:"modal-dialog modal-xl"},cs={class:"modal-content"},rs={class:"modal-header"},ds={class:"modal-title"},ms=s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),us={class:"modal-body"};function _s(o,e,t,a,l,d){return r(),c("div",is,[s("div",ls,[s("div",cs,[s("div",rs,[s("h5",ds,[Q(o.$slots,"modal-title")]),ms]),s("div",us,[Q(o.$slots,"modal-body")])])])])}var gs=p(ns,[["render",_s]]),hs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:gs}),ps="/assets/GameQ2.7a579647.png";const fs={setup(){return{user:g(()=>i.user),account:g(()=>i.account),async login(){f.loginWithPopup()}}}},A=o=>(C("data-v-8246bf3e"),o=o(),k(),o),vs={class:"navigation"},ys=A(()=>s("img",{id:"siteLogo",class:"ms-2 me-5 mt-2",alt:"logo",src:ps,height:"35",width:"75"},null,-1)),bs={class:"p-0"},ws=A(()=>s("a",{href:"#",class:"mt-4"},[s("span",{class:"text text-light"},"Home"),s("span",{class:"icon"},[s("i",{class:"text-light mdi mdi-home"})])],-1)),$s=A(()=>s("a",{href:"#",class:"mt-4"},[s("span",{class:"text text-light"},"Search"),s("span",{class:"icon"},[s("i",{class:"text-light mdi mdi-magnify"})])],-1)),Gs=A(()=>s("span",{class:"text text-light"},"GameNights",-1)),xs=A(()=>s("span",{class:"icon"},[s("i",{class:"text-light mdi mdi-chess-knight"})],-1)),Ns=[Gs,xs],Cs=A(()=>s("div",{class:"indicator"},null,-1)),ks={class:"ms-auto mt-2"},Ss={key:1,class:"icon me-3"},As=A(()=>s("i",{class:"text-light mdi mdi-account","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},null,-1)),Rs=[As];function Is(o,e,t,a,l,d){const n=x("router-link"),v=x("AccountOffcanvas");return r(),c(P,null,[s("div",vs,[ys,s("ul",bs,[s("li",{class:D(["list",{"router-link-active":o.$route.name=="GameCloset"}])},[$(n,{to:{name:"GameCloset"}},{default:z(()=>[ws]),_:1})],2),s("li",{class:D(["list",{"router-link-active":o.$route.name=="Search"}])},[$(n,{to:{name:"Search"}},{default:z(()=>[$s]),_:1})],2),s("li",{class:D(["list",{"router-link-active":o.$route.name=="GameNight"||o.$route.name=="GameNightDetails"}])},[$(n,{to:{name:"GameNight"}},{default:z(()=>[s("a",{href:"#",class:D(["mt-4",{"router-link-active":o.$route.name=="GameNightDetails"}])},Ns,2)]),_:1})],2),Cs]),s("span",ks,[a.user.isAuthenticated?(r(),c("span",Ss,Rs)):(r(),c("button",{key:0,class:"btn selectable text-ep text-light text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...q)=>a.login&&a.login(...q))}," Login "))])]),$(v)],64)}var Os=p(fs,[["render",Is],["__scopeId","data-v-8246bf3e"]]),Es=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Os});const Ts={setup(){return{}}},me=o=>(C("data-v-177e1b58"),o=o(),k(),o),Ms={class:"offcanvas offcanvas-start rounded",tabindex:"-1","aria-labelledby":"offcanvasLabel"},Ps={class:"offcanvas-header"},Qs={class:"offcanvas-title col-md-10",id:"offcanvasLabel"},Ds=me(()=>s("button",{type:"button",class:"btn-close text-reset col-md-2","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1)),Ls=me(()=>s("div",{class:"grad"},null,-1)),qs={class:"offcanvas-body"};function js(o,e,t,a,l,d){return r(),c("div",Ms,[s("div",Ps,[s("h5",Qs,[Q(o.$slots,"offcanvas-title",{},void 0,!0)]),Ds]),Ls,s("div",qs,[Q(o.$slots,"offcanvas-body",{},void 0,!0)])])}var Bs=p(Ts,[["render",js],["__scopeId","data-v-177e1b58"]]),Us=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Bs});class Vs{async attendGameNight(e){await m.post(`api/players/${e}`)}async unattendGameNight(e){await m.delete(`api/players/${e}`)}async editMyItems(e){await m.put(`api/players/${e.id}`,e)}async getGameNightsImAttending(){const e=await m.get("account/players");i.myAttending=e.data}}const ue=new Vs;const zs={props:{player:{type:Object,required:!0}},setup(){return{account:g(()=>i.account),players:g(()=>i.players),gameQueue:g(()=>i.gameQueue),async removeItems(){try{const o=i.players.find(e=>e.account.id===i.account.id);o.items="",await ue.editMyItems(o)}catch(o){u.error(o),h.toast(o)}}}}},Hs={class:"component"},Ws={key:0,class:"card p-2"},Ks={class:"d-flex"},Ys=["src"];function Fs(o,e,t,a,l,d){var n;return r(),c("div",Hs,[t.player.items?(r(),c("div",Ws,[s("div",Ks,[s("h3",null,[s("img",{src:t.player.account.picture,alt:"player picture",class:"pic me-3"},null,8,Ys),V(_((n=t.player.account)==null?void 0:n.name),1)]),a.account.id===t.player.accountId?(r(),c("i",{key:0,class:"mdi mdi-trash-can f-20 text-danger ms-auto selectable",onClick:e[0]||(e[0]=v=>a.removeItems())})):w("",!0)]),s("p",null,_(t.player.items),1)])):w("",!0)])}var Js=p(zs,[["render",Fs],["__scopeId","data-v-342390b8"]]),Xs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Js});const Zs={props:{game:{type:Object}},setup(o){return{closetGames:g(()=>i.myGames.filter(e=>e.owned))}}},eo=o=>(C("data-v-2f60057b"),o=o(),k(),o),to={class:"component"},ao=eo(()=>s("p",null,"QR Code for rules",-1)),so={class:"qrcode"},oo=["src"];function no(o,e,t,a,l,d){const n=x("vue-qrcode");return r(),c("div",to,[ao,s("figure",so,[$(n,{value:t.game.rules_url,options:{errorCorrectionLevel:"Q",width:200,color:{dark:"#840196",light:"#ffffff"}}},null,8,["value"]),s("img",{class:"qrcode__image",src:t.game.image_url,alt:"game.name"},null,8,oo)])])}var io=p(Zs,[["render",no],["__scopeId","data-v-2f60057b"]]),lo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:io});const co={props:{gameNight:{type:Object}},setup(o){return{gameNight:g(()=>i.gameNights)}}},ro=o=>(C("data-v-80bbd8fa"),o=o(),k(),o),mo={class:"component"},uo=ro(()=>s("p",null,"QR Code to join a Game Night",-1)),_o={class:"qrcode"};function go(o,e,t,a,l,d){const n=x("vue-qrcode");return r(),c("div",mo,[uo,s("figure",_o,[$(n,{value:"http://localhost:8080/api/gamenight/"+a.gameNight.id,options:{errorCorrectionLevel:"Q",width:200,color:{dark:"#840196",light:"#ffffff"}}},null,8,["value"])])])}var ho=p(co,[["render",go],["__scopeId","data-v-80bbd8fa"]]),po=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ho});const fo={props:{gameNight:{type:Object}},setup(o){return{gameNight:g(()=>i.gameNights)}}},vo={class:"component"},yo={class:"modal",tabindex:"-1",id:"qrCodeModal"},bo={class:"modal-dialog"},wo={class:"modal-content"},$o=s("div",{class:"modal-header"},[s("h5",{class:"modal-title"},"Join Game Night"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Go={class:"modal-body"},xo=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),s("button",{type:"button",class:"btn btn-primary"},"Save changes")],-1);function No(o,e,t,a,l,d){const n=x("QRCodeJoin");return r(),c("div",vo,[s("div",yo,[s("div",bo,[s("div",wo,[$o,s("div",Go,[$(n,{gameNight:a.gameNight},null,8,["gameNight"])]),xo])])])])}var Co=p(fo,[["render",No]]),ko=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Co});class So{async addToGameQueue(e){await m.post("api/gamequeue",e)}async removeGameQueue(e){await m.delete(`api/gamequeue/${e}`),i.gameQueue=i.gameQueue.filter(t=>t.id!==e)}async getAllGameQueue(e){const t=await m.get(`api/gamenight/${e}/gamequeue`);i.gameQueue=t.data}async vote(e){await m.put(`api/gamequeue/${e}/votes`)}sortByVote(e){return e.sort((t,a)=>t.vote<a.vote?-1:t.vote>a.vote?1:0)}}const Ao=new So,Ro={setup(){let o=j();G({});const e=G("Choose a game!"),t=Z({editable:{}});return{closetGames:g(()=>i.myGames.filter(a=>a.owned)),gameQueue:e,state:t,async createGameNight(){try{const a=e.value;u.log("create",t.editable,"gameQueue",a),await W.createGameNight(t.editable),this.addXp();const l=i.activeGameNight;await ue.attendGameNight(l.pin);const d=i.myGames.find(v=>v.name===a);u.log("Active GameNight",i.activeGameNight),u.log("Player",i.players);let n={gameId:d.id,gameNightId:i.activeGameNight.id};await Ao.addToGameQueue(n),o.push({name:"GameNightDetails",params:{id:i.activeGameNight.id}}),t.editable={}}catch(a){u.error(a),h.toast(a.message,"error")}},async addXp(){let a=i.account;a.xp+=25,a.xp>=640?a.rank="Noob-Slayer":a.xp>=320?a.rank="Royalty":a.xp>=160?a.rank="Champion":a.xp>=80?a.rank="Knight":a.xp>=40&&(a.rank="Squire"),u.log("xp",a),await T.edit(a)}}}},Io={class:"modal fade",id:"hostModal","aria-hidden":"true","aria-labelledby":"hostModal",tabindex:"-1"},Oo={class:"modal-dialog modal-dialog-centered"},Eo={class:"modal-content"},To=s("div",{class:"modal-header bg-secondary"},[s("h5",{class:"modal-title",id:"exampleModalToggleLabel"}," Host a Game Night "),s("button",{type:"button",class:"btn-close bg-secondary","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Mo={class:"modal-body"},Po={class:"row"},Qo={class:"col m-2"},Do={class:"row"},Lo={class:"col m-2"},qo={class:"row"},jo={class:"col m-2"},Bo={class:"dropdown mx-4 my-2"},Uo={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",required:""},Vo={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},zo=["onClick"],Ho=s("div",{class:"modal-footer"},[s("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Create ")],-1);function Wo(o,e,t,a,l,d){return r(),c("div",Io,[s("div",Oo,[s("div",Eo,[To,s("form",{onSubmit:e[3]||(e[3]=N(n=>a.createGameNight(),["prevent"]))},[s("div",Mo,[s("div",Po,[s("div",Qo,[y(s("input",{type:"text","aria-label":"name",placeholder:"Name your game night",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>a.state.editable.name=n),required:""},null,512),[[b,a.state.editable.name]])])]),s("div",Do,[s("div",Lo,[y(s("input",{type:"text","aria-label":"location",placeholder:"Location",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>a.state.editable.location=n),required:""},null,512),[[b,a.state.editable.location]])])]),s("div",qo,[s("div",jo,[y(s("input",{type:"datetime-local","aria-label":"date",placeholder:"Date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>a.state.editable.gameNightDate=n),required:""},null,512),[[b,a.state.editable.gameNightDate]])])]),s("div",Bo,[s("button",Uo,_(a.gameQueue),1),s("ul",Vo,[(r(!0),c(P,null,ae(a.closetGames,n=>(r(),c("li",{key:n.atlasGameId},[s("div",{class:"dropdown-item selectable",onClick:v=>a.gameQueue=n.name},_(n.name),9,zo)]))),128))])])]),Ho],32)])])])}var Ko=p(Ro,[["render",Wo]]),Yo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ko});function Fo(o){Object.entries({"./components/AccountModal.vue":Ve,"./components/AccountOffcanvas.vue":bt,"./components/AddRulesForm.vue":Tt,"./components/EditForm.vue":Ft,"./components/Game.vue":Ta,"./components/GameDetails.vue":os,"./components/Modal.vue":hs,"./components/Navbar.vue":Es,"./components/OffCanvas.vue":Us,"./components/PlayerItems.vue":Xs,"./components/QRCodeGame.vue":lo,"./components/QRCodeJoin.vue":po,"./components/QRCodeModal.vue":ko,"./components/hostModal.vue":Yo}).forEach(([t,a])=>{const l=a.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");o.component(l,a.default)})}const Y=we(Ce);Fo(Y);Y.component(se.name,se);Y.use(ie).mount("#app");export{i as A,Js as P,p as _,h as a,T as b,W as c,S as d,f as e,Ao as g,u as l,ue as p,le as s};
