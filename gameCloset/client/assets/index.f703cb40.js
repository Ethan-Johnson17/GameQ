var ue=Object.defineProperty;var W=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var K=(s,e,t)=>e in s?ue(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,F=(s,e)=>{for(var t in e||(e={}))_e.call(e,t)&&K(s,t,e[t]);if(W)for(var t of W(e))ge.call(e,t)&&K(s,t,e[t]);return s};import{r as Y,c as g,a as x,b as r,d as o,e as v,F as O,o as c,f as J,S as X,u as Z,g as $,w as ee,M as q,h as N,i as w,v as G,p as C,j as k,t as u,k as te,l as he,m as f,n as A,q as M,s as pe,x as be,y as T,z as ye,A as ve,B as L,C as fe,D as we,E as ae}from"./vendor.b0e93d7b.js";const Ge=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const n of d.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerpolicy&&(d.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?d.credentials="include":l.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(l){if(l.ep)return;l.ep=!0;const d=t(l);fetch(l.href,d)}};Ge();const i=Y({user:{},account:{},atlasGames:[],myGames:[],activeGameNight:{},myGameNights:[],players:[],gameQueue:[],myAttendance:[],gameNights:{}});var p=(s,e)=>{for(const[t,a]of e)s[t]=a;return s};const xe={name:"App",setup(){return{appState:g(()=>i)}}},$e=o("footer",null,null,-1);function Ne(s,e,t,a,l,d){const n=x("Navbar"),y=x("router-view");return c(),r(O,null,[o("header",null,[v(n)]),o("main",null,[v(y)]),$e],64)}var Ce=p(xe,[["render",Ne]]);const oe=window.location.origin.includes("localhost"),j=oe?"http://localhost:3000":"",ke="kylee-marlin.us.auth0.com",Se="mpXgASnPybMqw6Qp3lKxL9QNqXVp7ylk",Ae="https://CoolStuff.com";function I(s,e){if(oe)console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(s){case"log":case"assert":return}console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const _={log(){I("log",arguments)},error(){I("error",arguments)},warn(){I("warn",arguments)},assert(){I("assert",arguments)},trace(){I("trace",arguments)}},m=J.create({baseURL:j,timeout:8e3}),Re=J.create({baseURL:"https://api.boardgameatlas.com/api",timeout:8e3});class Te{async getAccount(){try{const e=await m.get("/account");i.account=e.data}catch(e){_.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async edit(e){const t=await m.put("account/",e);i.account=t.data,_.log("xp res",t.data)}}const B=new Te;class h{static async confirm(e="Are you sure?",t="You won't be able to revert this!",a="warning",l="Yes, delete it!"){try{return!!(await X.fire({title:e,text:t,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:l})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",a="top-end",l=3e3,d=!0){X.fire({title:e,icon:t,position:a,timer:l,timerProgressBar:d,toast:!0,showConfirmButton:!1})}}const Ie={setup(){Z();const s=$({});return ee(()=>{s.value={}}),{editable:s,async edit(){try{await B.edit(s.value),q.getOrCreateInstance(document.getElementById("accountModal")).hide()}catch(e){_.error(e),h.toast("Failed to Edit","error")}}}}},Ee={class:"modal fade",id:"accountModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Oe={class:"modal-dialog"},Me={class:"modal-content"},Pe=o("div",{class:"modal-header"},[o("h5",{class:"modal-title",id:"exampleModalLabel"},"Edit account"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qe={class:"modal-body"},De={class:"mb-3 d-flex justify-content-between"},qe=o("label",{for:"picture",class:"form-label"},"Picture",-1),Le=o("label",{for:"name",class:"form-label"},"Name",-1),je=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),o("button",{type:"submit",class:"btn btn-primary"}," Save ")],-1);function Be(s,e,t,a,l,d){return c(),r("div",Ee,[o("div",Oe,[o("div",Me,[Pe,o("div",Qe,[o("form",{onSubmit:e[2]||(e[2]=N((...n)=>a.edit&&a.edit(...n),["prevent"]))},[o("div",De,[o("div",null,[qe,w(o("input",{type:"url",class:"form-control",name:"picture",id:"picture","aria-describedby":"picture",placeholder:"picture...","onUpdate:modelValue":e[0]||(e[0]=n=>a.editable.picture=n)},null,512),[[G,a.editable.picture]])]),o("div",null,[Le,w(o("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"name",placeholder:"Name...","onUpdate:modelValue":e[1]||(e[1]=n=>a.editable.name=n)},null,512),[[G,a.editable.name]])])]),je],32)])])])])}var Ve=p(Ie,[["render",Be]]),Ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ve});class se{constructor(e){this.name=e.name,this.owned=e.owned||!1,this.accountId=e.accountId,this.atlasUrl=e.url||e.atlasUrl,this.description=e.description,this.houseRules=e.houseRules,this.rules_url=e.rules_url,this.atlasGameId=e.atlasGameId||e.id,this.id=e._id,this.min_players=e.min_players,this.max_players=e.max_players,this.price=e.price,this.min_playtime=e.min_playtime,this.max_playtime=e.max_playtime,this.image_url=e.image_url,this.min_age=e.min_age}}const ze="&client_id=RhH4WBOfK3";class He{async getAll(e=""){const t=await Re.get(e+"&limit=24"+ze);i.atlasGames=t.data.games.map(a=>new se(a))}async getMyGames(e=""){const t=await m.get(e);i.myGames=t.data.map(a=>new se(a))}async addToWishlist(e){if(i.myGames.find(a=>a.atlasUrl==e.atlasUrl))h.toast("Already in wishlist.","error");else{const a=await m.post("api/games",e);i.myGames.unshift(a.data)}}async addToGameCloset(e){if(e.id)await m.put("api/games/"+e.id,e);else{const t=await m.post("api/games",e);i.myGames.unshift(t.data)}}async addRules(e,t){await m.put("api/games/"+e,t)}async remove(e){await m.delete("api/games/"+e),i.myGames=i.myGames.filter(t=>t.id!==e)}}const S=new He;const We={props:{game:{type:Object}},setup(s){const e=$({});return{editable:e,closetGames:g(()=>i.myGames.filter(t=>t.owned)),myGameNights:g(()=>i.myGameNights),account:g(()=>i.account),async addRules(t){try{await S.addRules(t,e.value),q.getOrCreateInstance(document.getElementById("addRules-"+t)).hide(),await S.getMyGames("/account/myGames")}catch(a){_.log(a),h.toast(a.message,"error")}}}}},V=s=>(C("data-v-b7a60da2"),s=s(),k(),s),Ke={class:"modal-body"},Fe={class:"row"},Ye={class:"col m-2"},Je=V(()=>o("h6",null,"Add Official Rules with a link:",-1)),Xe={class:"row"},Ze={class:"col m-2"},et=V(()=>o("h6",null,"Add House Rules:",-1)),tt=V(()=>o("div",{class:"modal-footer"},[o("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Save Changes ")],-1));function at(s,e,t,a,l,d){return c(),r("form",{onSubmit:e[2]||(e[2]=N(n=>a.addRules(t.game.id),["prevent"]))},[o("div",Ke,[o("div",Fe,[o("div",Ye,[Je,w(o("input",{type:"url","aria-label":"OfficialRulesURL",placeholder:"Add Link to Official Rules",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>a.editable.rules_url=n)},null,512),[[G,a.editable.rules_url]])])]),o("div",Xe,[o("div",Ze,[et,w(o("textarea",{type:"text","aria-label":"HouseRules",placeholder:"Add House Rules",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>a.editable.houseRules=n)},null,512),[[G,a.editable.houseRules]])])])]),tt],32)}var ot=p(We,[["render",at],["__scopeId","data-v-b7a60da2"]]),st=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ot});class nt{async createGameNight(e){const t=await m.post("api/gamenight",e);i.activeGameNight=t.data,i.myGameNights.push(t.data)}async getMyGameNights(e=""){const t=await m.get(e),a=await m.get("account/players");let l=this.sortByDate(t.data),d=this.sortByDate(a.data);i.myGameNights=l,i.myAttendance=d}sortByDate(e){return e.sort((t,a)=>t.gameNightDate<a.gameNightDate?-1:t.gameNightDate>a.gameNightDate?1:0)}async delete(e){await m.delete("/api/gamenight/"+e),i.myGameNights=i.myGameNights.filter(t=>t.id!==e)}async cancel(e){let t=i.myGameNights;const l=(await m.put(`api/gamenight/${e}/isCanceled`)).data,d=i.myGameNights.findIndex(n=>n.id===l.id);d===-1&&i.myGameNights.unshift(l),t.splice(d,1,l)}async edit(e,t){const l=(await m.put(`api/gamenight/${e}`,t)).data,d=i.myGameNights.findIndex(n=>n.id===l.id);d===-1&&i.myGameNights.unshift(l),i.myGameNights.splice(d,1,l)}async findGameNight(e=""){const t=await m.get(`api/gamenight/pin/${e}`);return i.activeGameNight=t.data,t.data}async findGameNightId(e){const t=await m.get(`api/gamenight/${e}`);i.activeGameNight=t.data,_.log(t.data)}async getAllPlayers(e){const t=await m.get(`api/gamenight/${e}/players`);i.players=t.data}}const U=new nt,it={props:{gameNight:{type:Object}},setup(s){const e=$({}),t=$("Pick a game");return ee(async()=>{try{e.value=F({},s.gameNight)}catch(a){_.error(a),h.toast(a.message,"error")}}),{editable:e,gameQueue:t,closetGames:g(()=>i.myGames.filter(a=>a.owned)),myGameNights:g(()=>i.myGameNights),account:g(()=>i.account),async editGameNight(a){try{await U.edit(a,e.value),_.log("editable.value",e.value,"gameNightId",a),q.getOrCreateInstance(document.getElementById("editGameNight-"+a)).hide(),await U.getMyGameNights("/account/gamenight")}catch(l){h.toast(l.message,"error")}}}}},lt={class:"modal-body"},rt={class:"row"},ct={class:"col m-2"},dt={class:"row"},mt={class:"col m-2"},ut={class:"row"},_t={class:"col m-2"},gt={class:"dropdown mx-4 my-2",hidden:""},ht={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},pt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},bt=["onClick"],yt=o("div",{class:"modal-footer"},[o("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Save Changes ")],-1);function vt(s,e,t,a,l,d){return c(),r("form",{onSubmit:e[3]||(e[3]=N(n=>a.editGameNight(t.gameNight.id),["prevent"]))},[o("div",lt,[o("div",rt,[o("div",ct,[w(o("input",{type:"text","aria-label":"name",placeholder:"Name your game night",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>a.editable.name=n),required:""},null,512),[[G,a.editable.name]])])]),o("div",dt,[o("div",mt,[w(o("input",{type:"text","aria-label":"location",placeholder:"Location",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>a.editable.location=n),required:""},null,512),[[G,a.editable.location]])])]),o("div",ut,[o("div",_t,[w(o("input",{type:"datetime-local","aria-label":"date",placeholder:"Date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>a.editable.gameNightDate=n),required:""},null,512),[[G,a.editable.gameNightDate]])])]),o("div",gt,[o("button",ht,u(a.gameQueue),1),o("ul",pt,[(c(!0),r(O,null,te(a.closetGames,n=>(c(),r("li",{key:n.atlasGameId},[o("div",{class:"dropdown-item selectable",onClick:y=>a.gameQueue=n.name},u(n.name),9,bt)]))),128))])])]),yt],32)}var ft=p(it,[["render",vt]]),wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ft});const Gt={props:{game:{type:Object},isSearchResult:{type:Boolean,default:!1}},setup(s){const e=he();let t=$(!1);return{flipped:t,route:e,user:g(()=>i.user),account:g(()=>i.account),hasGame:g(()=>i.myGames.find(l=>l.atlasGameId===s.game.atlasGameId)),async addToWishlist(){try{const a=s.game,l=await S.addToWishlist(a);h.toast("Added to Wishlist","success")}catch(a){h.toast("Already in your wishlist!:"+a.message,"error"),_.error(a)}},async addToGameCloset(){try{const a=s.game;a.owned=!0,document.getElementById(s.game.atlasGameId).classList.add("animate__bounce"),await S.addToGameCloset(a),h.toast("Added to Game Closet","success"),this.addXp()}catch(a){h.toast("Already in your closet!"+a.message,"error"),_.error(a)}},async addXp(){let a=i.account;a.xp+=10,a.xp>=320?a.rank="Noob-Slayer":a.xp>=240?a.rank="Royalty":a.xp>=160?a.rank="Champion":a.xp>=80?a.rank="Knight":a.xp>=40&&(a.rank="Squire"),_.log("xp",a),await B.edit(a)},async remove(a){try{if(!await h.confirm("Remove game?"))return;document.getElementById(s.game.atlasGameId).classList.add("animate__rollOut"),setTimeout(async()=>{await S.remove(a)},600)}catch(l){h.toast(l.message,"error"),_.error(l)}},flipCard(){t.value=!t.value,t.value?document.getElementById(s.game.atlasGameId).style.transform="rotateY(180deg)":document.getElementById(s.game.atlasGameId).style.transform="rotateY(0deg)"}}}},ne=s=>(C("data-v-7f1f4e0d"),s=s(),k(),s),xt=["id"],$t={class:"flip-card-front elevation-3"},Nt={class:"container"},Ct={class:"row"},kt={class:"col p-0"},St=["src"],At={class:"row"},Rt={class:"col text-center my-1"},Tt={class:"col"},It={class:"flip-card-back elevation-3"},Et={class:"row"},Ot={key:0,class:"col text-danger text-end"},Mt=ne(()=>o("div",{class:"row"},[o("div",{class:"col"},[o("h3",{class:"my-4"},"Game Details")])],-1)),Pt={key:0,class:"row"},Qt={key:0,class:"col text-start mx-3"},Dt={key:1,class:"col text-start ms-3"},qt={key:1,class:"row"},Lt={key:0,class:"col text-start ms-3"},jt={key:1,class:"col text-start ms-3"},Bt={key:2,class:"row"},Vt={key:0,class:"col text-start ms-3"},Ut={class:"row"},zt={class:"col text-start mt-3 ms-3"},Ht={key:0},Wt=["href"],Kt={key:1},Ft=["href"],Yt={key:3,class:"row"},Jt={key:0,class:"col mt-3"},Xt={key:0,class:"row"},Zt={key:1,class:"col m-2 text-danger"},ea=ne(()=>o("p",null,"Added",-1)),ta=[ea],aa={key:1,class:"col mt-3"};function oa(s,e,t,a,l,d){return c(),r("div",{class:"flip-card my-4 grow",onClick:e[7]||(e[7]=(...n)=>a.flipCard&&a.flipCard(...n))},[o("div",{class:"flip-card-inner selectable animate__animated",id:t.game.atlasGameId,style:{transform:"rotateY(0deg)"}},[o("div",$t,[o("div",Nt,[o("div",Ct,[o("div",kt,[o("img",{class:"img-container m-2",src:t.game.image_url,alt:"",loading:"lazy"},null,8,St)])]),o("div",At,[o("div",Rt,[o("h3",Tt,u(t.game.name),1)])])])]),o("div",It,[o("div",Et,[a.route.name=="GameCloset"?(c(),r("div",Ot,[o("i",{class:"mdi mdi-trash-can-outline selectable mdi-24px p-2",onClick:e[0]||(e[0]=n=>a.remove(t.game.id))})])):f("",!0)]),Mt,t.game.min_playtime&&t.game.max_playtime?(c(),r("div",Pt,[t.game.min_playtime===t.game.max_playtime?(c(),r("h4",Qt," Play time: "+u(t.game.min_playtime)+" minutes ",1)):(c(),r("h4",Dt," Play time: "+u(t.game.min_playtime)+" - "+u(t.game.max_playtime)+" minutes ",1))])):f("",!0),t.game.min_players&&t.game.max_players?(c(),r("div",qt,[t.game.min_players===t.game.max_players?(c(),r("h4",Lt," Number of players: "+u(t.game.min_players),1)):(c(),r("h4",jt," Number of players: "+u(t.game.min_players)+" - "+u(t.game.max_players),1))])):f("",!0),t.game.owned?f("",!0):(c(),r("div",Bt,[t.game.price>0?(c(),r("div",Vt,[o("h4",null,"Cost: $"+u(t.game.price),1)])):f("",!0)])),o("div",Ut,[o("div",zt,[t.game.owned?(c(),r("h5",Kt,[o("a",{"data-bs-toggle":"offcanvas",href:"#gameDetails-"+t.game.id},"See More Details",8,Ft)])):(c(),r("h5",Ht,[o("a",{target:"_blank",href:t.game.atlasUrl},"See More Details",8,Wt)]))])]),a.user.isAuthenticated?(c(),r("div",Yt,[t.isSearchResult?(c(),r("div",Jt,[a.hasGame?(c(),r("div",Zt,ta)):(c(),r("div",Xt,[o("div",{class:"col-6 text-center",onClick:e[2]||(e[2]=N(()=>{},["stop"]))},[a.route.name=="Search"&&!t.game.owned?(c(),r("button",{key:0,onClick:e[1]||(e[1]=n=>a.addToWishlist(t.game)),class:"btn btn-secondary",title:"add to wishlist"}," Add to Wishlist ")):f("",!0)]),o("div",{class:"col-6 text-center px-2",onClick:e[4]||(e[4]=N(()=>{},["stop"]))},[t.game.owned?f("",!0):(c(),r("button",{key:0,class:"btn btn-secondary",title:"add to game closet",onClick:e[3]||(e[3]=n=>a.addToGameCloset(t.game))}," Add to Closet "))])]))])):(c(),r("div",aa,[o("div",{class:"text-end",onClick:e[6]||(e[6]=N(()=>{},["stop"]))},[t.game.owned?f("",!0):(c(),r("button",{key:0,class:"btn btn-secondary me-3",title:"add to game closet",onClick:e[5]||(e[5]=n=>a.addToGameCloset(t.game))}," Add to Closet "))])]))])):f("",!0)])],8,xt)])}var sa=p(Gt,[["render",oa],["__scopeId","data-v-7f1f4e0d"]]),na=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:sa});const ia={props:{game:{type:Object}},setup(s){return{editable:$({}),closetGames:g(()=>i.myGames.filter(t=>t.owned)),async addRules(t){try{let a=t.target.innerText,l=s.game.id,d={houseRules:a};await S.addRules(l,d),await S.getMyGames("/account/myGames")}catch(a){_.log(a),h.toast(a.message,"error")}}}}},ie=s=>(C("data-v-1f06305c"),s=s(),k(),s),la={class:"offcanvas-body p-1"},ra={class:"col text-center"},ca=["src","alt"],da={class:"col my-2"},ma={key:0,class:"col"},ua={key:1,class:"col"},_a={class:"col"},ga=["innerHTML"],ha={class:"accordion mb-5 col mt-3",id:"accordionExample"},pa={class:"accordion-item bgColor"},ba=ie(()=>o("h2",{class:"accordion-header",id:"headingOne"},[o("button",{class:"accordion-button bg-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Official Rules ")],-1)),ya={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},va={key:0,class:"accordion-body"},fa=["href"],wa={key:1,class:"accordion-body"},Ga=["data-bs-target"],xa=["data-bs-target"],$a={class:"accordion-item bgColor"},Na=ie(()=>o("h2",{class:"accordion-header",id:"headingTwo"},[o("button",{class:"accordion-button collapsed bg-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," House Rules ")],-1)),Ca={id:"collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample"};function ka(s,e,t,a,l,d){const n=x("QRCodeGame");return c(),r("div",la,[o("div",ra,[o("img",{class:"img-container m-2",src:t.game.image_url,alt:t.game.name},null,8,ca)]),o("div",da,[o("h2",null,u(t.game.name),1)]),t.game.min_players!==t.game.max_players?(c(),r("div",ma,u(t.game.min_players)+" to "+u(t.game.max_players)+" players ",1)):(c(),r("div",ua,u(t.game.min_players)+" players",1)),o("div",_a,u(t.game.min_playtime)+" to "+u(t.game.max_playtime)+" minute playtime ",1),o("div",{class:"col mt-2",innerHTML:t.game.description},null,8,ga),o("div",ha,[o("div",pa,[ba,o("div",ya,[t.game.rules_url?(c(),r("div",va,[o("a",{target:"_blank",href:t.game.rules_url},u(t.game.name)+" Rules",9,fa),v(n,{game:t.game},null,8,["game"])])):(c(),r("div",wa,[o("p",null,[A(" No "+u(t.game.name)+" rules found. ",1),o("span",{"data-bs-toggle":"modal","data-bs-target":"#addRules-"+t.game.id,class:"selectable"},"Add now?",8,Ga)]),o("i",{class:"mdi mdi-plus-thick text-secondary selectable btn","data-bs-toggle":"modal","data-bs-target":"#addRules-"+t.game.id,title:"Add Official Rules"}," Add Rules",8,xa)]))])]),o("div",$a,[Na,o("div",Ca,[o("div",{class:"accordion-body hover",contenteditable:"",onBlur:e[0]||(e[0]=(...y)=>a.addRules&&a.addRules(...y))},u(t.game.houseRules),33)])])])])}var Sa=p(ia,[["render",ka],["__scopeId","data-v-1f06305c"]]),Aa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Sa});const Ra={setup(){return{}}},Ta={class:"modal",tabindex:"-1"},Ia={class:"modal-dialog modal-xl"},Ea={class:"modal-content"},Oa={class:"modal-header"},Ma={class:"modal-title"},Pa=o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Qa={class:"modal-body"};function Da(s,e,t,a,l,d){return c(),r("div",Ta,[o("div",Ia,[o("div",Ea,[o("div",Oa,[o("h5",Ma,[M(s.$slots,"modal-title")]),Pa]),o("div",Qa,[M(s.$slots,"modal-body")])])])])}var qa=p(Ra,[["render",Da]]),La=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qa});const ja="modulepreload",le={},Ba="/",R=function(e,t){return!t||t.length===0?e():Promise.all(t.map(a=>{if(a=`${Ba}${a}`,a in le)return;le[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const n=document.createElement("link");if(n.rel=l?"stylesheet":ja,l||(n.as="script",n.crossOrigin=""),n.href=a,document.head.appendChild(n),l)return new Promise((y,Q)=>{n.addEventListener("load",y),n.addEventListener("error",Q)})})).then(()=>e())};function Va(s){switch(s){case"./pages/AboutPage.vue":return R(()=>import("./AboutPage.9ebfa358.js"),["assets/AboutPage.9ebfa358.js","assets/vendor.b0e93d7b.js"]);case"./pages/AccountPage.vue":return R(()=>import("./AccountPage.62bddcec.js"),["assets/AccountPage.62bddcec.js","assets/AccountPage.1d38451d.css","assets/vendor.b0e93d7b.js"]);case"./pages/ActiveGameNightPage.vue":return R(()=>import("./ActiveGameNightPage.3aea9c8b.js"),["assets/ActiveGameNightPage.3aea9c8b.js","assets/ActiveGameNightPage.dbfbec17.css","assets/vendor.b0e93d7b.js"]);case"./pages/GameClosetPage.vue":return R(()=>import("./GameClosetPage.30c617b0.js"),["assets/GameClosetPage.30c617b0.js","assets/GameClosetPage.ee23e09d.css","assets/vendor.b0e93d7b.js"]);case"./pages/GameNightPage.vue":return R(()=>import("./GameNightPage.97dc677d.js"),["assets/GameNightPage.97dc677d.js","assets/GameNightPage.1412185f.css","assets/vendor.b0e93d7b.js"]);case"./pages/SearchPage.vue":return R(()=>import("./SearchPage.adc0616f.js"),["assets/SearchPage.adc0616f.js","assets/SearchPage.3f5244e4.css","assets/vendor.b0e93d7b.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function E(s){return()=>Va(`./pages/${s}.vue`)}const Ua=[{path:"/",name:"GameCloset",component:E("GameClosetPage"),beforeEnter:T},{path:"/search",name:"Search",component:E("SearchPage"),beforeEnter:T},{path:"/gameNight",name:"GameNight",component:E("GameNightPage"),beforeEnter:T},{path:"/gameNight/:id",name:"GameNightDetails",component:E("ActiveGameNightPage"),beforeEnter:T},{path:"/account",name:"Account",component:E("AccountPage"),beforeEnter:T}],re=pe({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:be(),routes:Ua}),P={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class za{constructor(e=!1,t=j){this.socket=ye(t||j),this.requiresAuth=e,this.queue=[],this.authenticated=!1,this.on(P.connected,this.onConnected).on(P.authenticated,this.onAuthenticated).on(P.error,this.onError)}on(e,t){var a;return(a=this.socket)==null||a.on(e,t.bind(this)),this}onConnected(e){_.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){_.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(P.authenticate,e)}joinRoom(e){var t;(t=this.socket)==null||t.emit("Join_Room",`Game${e}Night`),_.log("Joined_Room",e)}onError(e){_.error("[SOCKET_ERROR]",e)}enqueue(e,t){_.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){_.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class Ha extends za{constructor(){super();this.on("error",this.onError).on("New Game Que",this.newGameQ).on("Removed Game Que",this.removedGameQ).on("Votes on Game Que",this.votes).on("Attending Game Night",this.newPlayer).on("Leaving Game Night",this.deletePlayer).on("Bringing Game Night",this.bringing)}newGameQ(e){i.gameQueue.push(e)}removedGameQ(e){i.gameQueue=i.gameQueue.filter(t=>t.id!==e)}votes(e){let t=i.gameQueue.findIndex(a=>a.id===e.id);i.gameQueue.splice(t,1,e)}newPlayer(e){i.players=[...i.players,e]}deletePlayer(e){i.players=i.players.filter(t=>t.id!==e.id),i.gameQueue=i.gameQueue.filter(t=>t.accountId!==e.accountId)}bringing(e){let t=i.players.findIndex(a=>a.id===e.id);if(t===-1){i.players.push(e);return}i.players.splice(t,1,e)}onError(e){h.toast(e.message,"error")}}const ce=new Ha,b=ve({domain:ke,clientId:Se,audience:Ae,useRefreshTokens:!0,onRedirectCallback:s=>{re.push(s&&s.targetUrl?s.targetUrl:window.location.pathname)}});b.on(b.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=b.bearer,m.interceptors.request.use(Wa),i.user=b.user,await B.getAccount(),ce.authenticate(b.bearer)});async function Wa(s){if(!b.isAuthenticated)return s;const e=b.identity.exp*1e3,t=e<Date.now(),a=e<Date.now()+1e3*60*60*12;return t?await b.loginWithPopup():a&&(await b.getTokenSilently(),m.defaults.headers.authorization=b.bearer,ce.authenticate(b.bearer)),s}var Ka="/assets/GameQ2.7a579647.png";const Fa={setup(){return{user:g(()=>i.user),account:g(()=>i.account),async login(){b.loginWithPopup()},async logout(){b.logout({returnTo:window.location.origin})}}}},z=s=>(C("data-v-4a5d9cf2"),s=s(),k(),s),Ya={class:"navbar navbar-expand-lg navbar-dark bg-primary px-3 border-bottom border-2 border-dark"},Ja=fe('<div class="d-flex flex-column align-items-center me-5" data-v-4a5d9cf2><a href="/" data-v-4a5d9cf2><img alt="logo" src="'+Ka+'" height="60" data-v-4a5d9cf2></a></div><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation" data-v-4a5d9cf2><span class="navbar-toggler-icon" data-v-4a5d9cf2></span></button>',2),Xa={class:"collapse navbar-collapse",id:"navbarText"},Za={class:"navbar-nav me-auto"},eo=A(" Game Closet "),to=A(" Search Games "),ao=A(" Game Night "),oo=z(()=>o("button",{class:"btn btn-light me-5",title:"Host Game","data-bs-target":"#hostModal","data-bs-toggle":"modal"}," Host Game Night ",-1)),so={class:"navbar-text"},no={key:1,class:"dropdown my-2 my-lg-0"},io={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},lo=["src"],ro={class:"mx-3 text-ep"},co={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},mo=z(()=>o("div",{class:"list-group-item list-group-item-action hoverable","data-bs-target":"#accountModal","data-bs-toggle":"modal"}," Manage Account ",-1)),uo=z(()=>o("i",{class:"mdi mdi-logout"},null,-1)),_o=A(" logout "),go=[uo,_o];function ho(s,e,t,a,l,d){const n=x("router-link"),y=x("hostModal"),Q=x("AccountModal");return c(),r(O,null,[o("nav",Ya,[Ja,o("div",Xa,[o("ul",Za,[o("li",null,[v(n,{to:{name:"GameCloset"},class:"btn text-ep selectable text-uppercase text-light"},{default:L(()=>[eo]),_:1})]),o("li",null,[v(n,{to:{name:"Search"},class:"btn text-ep selectable text-uppercase text-light search-borders"},{default:L(()=>[to]),_:1})]),o("li",null,[v(n,{to:{name:"GameNight"},class:"btn text-ep selectable text-uppercase text-light"},{default:L(()=>[ao]),_:1})])]),oo,o("span",so,[a.user.isAuthenticated?(c(),r("div",no,[o("div",io,[o("img",{src:a.account.picture,alt:"user photo",height:"40",class:"rounded-circle profile-img"},null,8,lo),o("span",ro,u(a.account.name),1)]),o("div",co,[mo,o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...D)=>a.logout&&a.logout(...D))},go)])])):(c(),r("button",{key:0,class:"btn selectable text-ep text-light text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...D)=>a.login&&a.login(...D))}," Login "))])])]),v(y),v(Q)],64)}var po=p(Fa,[["render",ho],["__scopeId","data-v-4a5d9cf2"]]),bo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:po});const yo={setup(){return{}}},de=s=>(C("data-v-177e1b58"),s=s(),k(),s),vo={class:"offcanvas offcanvas-start rounded",tabindex:"-1","aria-labelledby":"offcanvasLabel"},fo={class:"offcanvas-header"},wo={class:"offcanvas-title col-md-10",id:"offcanvasLabel"},Go=de(()=>o("button",{type:"button",class:"btn-close text-reset col-md-2","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1)),xo=de(()=>o("div",{class:"grad"},null,-1)),$o={class:"offcanvas-body"};function No(s,e,t,a,l,d){return c(),r("div",vo,[o("div",fo,[o("h5",wo,[M(s.$slots,"offcanvas-title",{},void 0,!0)]),Go]),xo,o("div",$o,[M(s.$slots,"offcanvas-body",{},void 0,!0)])])}var Co=p(yo,[["render",No],["__scopeId","data-v-177e1b58"]]),ko=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Co});class So{async attendGameNight(e){await m.post(`api/players/${e}`)}async unattendGameNight(e){await m.delete(`api/players/${e}`)}async editMyItems(e){await m.put(`api/players/${e.id}`,e)}async getGameNightsImAttending(){const e=await m.get("account/players");i.myAttending=e.data}}const me=new So;const Ao={props:{player:{type:Object,required:!0}},setup(){return{account:g(()=>i.account),players:g(()=>i.players),gameQueue:g(()=>i.gameQueue),async removeItems(){try{const s=i.players.find(e=>e.account.id===i.account.id);s.items="",await me.editMyItems(s)}catch(s){_.error(s),h.toast(s)}}}}},Ro={class:"component"},To={key:0,class:"card p-2"},Io={class:"d-flex"},Eo=["src"];function Oo(s,e,t,a,l,d){var n;return c(),r("div",Ro,[t.player.items?(c(),r("div",To,[o("div",Io,[o("h3",null,[o("img",{src:t.player.account.picture,alt:"player picture",class:"pic me-3"},null,8,Eo),A(u((n=t.player.account)==null?void 0:n.name),1)]),a.account.id===t.player.accountId?(c(),r("i",{key:0,class:"mdi mdi-trash-can f-20 text-danger ms-auto selectable",onClick:e[0]||(e[0]=y=>a.removeItems())})):f("",!0)]),o("p",null,u(t.player.items),1)])):f("",!0)])}var Mo=p(Ao,[["render",Oo],["__scopeId","data-v-342390b8"]]),Po=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Mo});const Qo={props:{game:{type:Object}},setup(s){return{closetGames:g(()=>i.myGames.filter(e=>e.owned))}}},Do=s=>(C("data-v-2f60057b"),s=s(),k(),s),qo={class:"component"},Lo=Do(()=>o("p",null,"QR Code for rules",-1)),jo={class:"qrcode"},Bo=["src"];function Vo(s,e,t,a,l,d){const n=x("vue-qrcode");return c(),r("div",qo,[Lo,o("figure",jo,[v(n,{value:t.game.rules_url,options:{errorCorrectionLevel:"Q",width:200,color:{dark:"#840196",light:"#ffffff"}}},null,8,["value"]),o("img",{class:"qrcode__image",src:t.game.image_url,alt:"game.name"},null,8,Bo)])])}var Uo=p(Qo,[["render",Vo],["__scopeId","data-v-2f60057b"]]),zo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Uo});const Ho={props:{gameNight:{type:Object}},setup(s){return{gameNight:g(()=>i.gameNights)}}},Wo=s=>(C("data-v-80bbd8fa"),s=s(),k(),s),Ko={class:"component"},Fo=Wo(()=>o("p",null,"QR Code to join a Game Night",-1)),Yo={class:"qrcode"};function Jo(s,e,t,a,l,d){const n=x("vue-qrcode");return c(),r("div",Ko,[Fo,o("figure",Yo,[v(n,{value:"http://localhost:8080/api/gamenight/"+a.gameNight.id,options:{errorCorrectionLevel:"Q",width:200,color:{dark:"#840196",light:"#ffffff"}}},null,8,["value"])])])}var Xo=p(Ho,[["render",Jo],["__scopeId","data-v-80bbd8fa"]]),Zo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Xo});const es={props:{gameNight:{type:Object}},setup(s){return{gameNight:g(()=>i.gameNights)}}},ts={class:"component"},as={class:"modal",tabindex:"-1",id:"qrCodeModal"},os={class:"modal-dialog"},ss={class:"modal-content"},ns=o("div",{class:"modal-header"},[o("h5",{class:"modal-title"},"Join Game Night"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),is={class:"modal-body"},ls=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),o("button",{type:"button",class:"btn btn-primary"},"Save changes")],-1);function rs(s,e,t,a,l,d){const n=x("QRCodeJoin");return c(),r("div",ts,[o("div",as,[o("div",os,[o("div",ss,[ns,o("div",is,[v(n,{gameNight:a.gameNight},null,8,["gameNight"])]),ls])])])])}var cs=p(es,[["render",rs]]),ds=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:cs});class ms{async addToGameQueue(e){await m.post("api/gamequeue",e)}async removeGameQueue(e){await m.delete(`api/gamequeue/${e}`),i.gameQueue=i.gameQueue.filter(t=>t.id!==e)}async getAllGameQueue(e){const t=await m.get(`api/gamenight/${e}/gamequeue`);i.gameQueue=t.data}async vote(e){await m.put(`api/gamequeue/${e}/votes`)}sortByVote(e){return e.sort((t,a)=>t.vote<a.vote?-1:t.vote>a.vote?1:0)}}const us=new ms,_s={setup(){let s=Z();$({});const e=$("Choose a game!"),t=Y({editable:{}});return{closetGames:g(()=>i.myGames.filter(a=>a.owned)),gameQueue:e,state:t,async createGameNight(){try{const a=e.value;_.log("create",t.editable,"gameQueue",a),await U.createGameNight(t.editable);const l=i.activeGameNight;await me.attendGameNight(l.pin);const d=i.myGames.find(y=>y.name===a);_.log("Active GameNight",i.activeGameNight),_.log("Player",i.players);let n={gameId:d.id,gameNightId:i.activeGameNight.id};await us.addToGameQueue(n),s.push({name:"GameNightDetails",params:{id:i.activeGameNight.id}}),t.editable={}}catch(a){_.error(a),h.toast(a.message,"error")}}}}},gs={class:"modal fade",id:"hostModal","aria-hidden":"true","aria-labelledby":"hostModal",tabindex:"-1"},hs={class:"modal-dialog modal-dialog-centered"},ps={class:"modal-content"},bs=o("div",{class:"modal-header bg-secondary"},[o("h5",{class:"modal-title",id:"exampleModalToggleLabel"}," Host a Game Night "),o("button",{type:"button",class:"btn-close bg-secondary","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ys={class:"modal-body"},vs={class:"row"},fs={class:"col m-2"},ws={class:"row"},Gs={class:"col m-2"},xs={class:"row"},$s={class:"col m-2"},Ns={class:"dropdown mx-4 my-2"},Cs={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",required:""},ks={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Ss=["onClick"],As=o("div",{class:"modal-footer"},[o("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Create ")],-1);function Rs(s,e,t,a,l,d){return c(),r("div",gs,[o("div",hs,[o("div",ps,[bs,o("form",{onSubmit:e[3]||(e[3]=N(n=>a.createGameNight(),["prevent"]))},[o("div",ys,[o("div",vs,[o("div",fs,[w(o("input",{type:"text","aria-label":"name",placeholder:"Name your game night",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>a.state.editable.name=n),required:""},null,512),[[G,a.state.editable.name]])])]),o("div",ws,[o("div",Gs,[w(o("input",{type:"text","aria-label":"location",placeholder:"Location",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>a.state.editable.location=n),required:""},null,512),[[G,a.state.editable.location]])])]),o("div",xs,[o("div",$s,[w(o("input",{type:"datetime-local","aria-label":"date",placeholder:"Date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>a.state.editable.gameNightDate=n),required:""},null,512),[[G,a.state.editable.gameNightDate]])])]),o("div",Ns,[o("button",Cs,u(a.gameQueue),1),o("ul",ks,[(c(!0),r(O,null,te(a.closetGames,n=>(c(),r("li",{key:n.atlasGameId},[o("div",{class:"dropdown-item selectable",onClick:y=>a.gameQueue=n.name},u(n.name),9,Ss)]))),128))])])]),As],32)])])])}var Ts=p(_s,[["render",Rs]]),Is=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ts});function Es(s){Object.entries({"./components/AccountModal.vue":Ue,"./components/AddRulesForm.vue":st,"./components/EditForm.vue":wt,"./components/Game.vue":na,"./components/GameDetails.vue":Aa,"./components/Modal.vue":La,"./components/Navbar.vue":bo,"./components/OffCanvas.vue":ko,"./components/PlayerItems.vue":Po,"./components/QRCodeGame.vue":zo,"./components/QRCodeJoin.vue":Zo,"./components/QRCodeModal.vue":ds,"./components/hostModal.vue":Is}).forEach(([t,a])=>{const l=a.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");s.component(l,a.default)})}const H=we(Ce);Es(H);H.component(ae.name,ae);H.use(re).mount("#app");export{i as A,Mo as P,p as _,h as a,U as b,S as c,b as d,us as g,_ as l,me as p,ce as s};
