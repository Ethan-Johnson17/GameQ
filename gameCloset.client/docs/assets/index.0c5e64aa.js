var me=Object.defineProperty;var H=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var W=(o,e,t)=>e in o?me(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,Y=(o,e)=>{for(var t in e||(e={}))ue.call(e,t)&&W(o,t,e[t]);if(H)for(var t of H(e))_e.call(e,t)&&W(o,t,e[t]);return o};import{r as F,c as g,a as x,b as c,d as a,e as y,F as I,o as d,f as K,S as J,u as X,g as $,w as Z,M as q,h as N,i as f,v as w,p as C,j as S,t as u,k as ee,l as ge,m as G,n as A,q as O,s as he,x as pe,y as M,z as be,A as ve,B as ye,C as L,D as fe,E as we,G as te}from"./vendor.369051b3.js";const Ge=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}};Ge();const i=F({user:{},account:{},atlasGames:[],myGames:[],activeGameNight:{},myGameNights:[],players:[],gameQueue:[],myAttendance:[],gameNights:{}});var h=(o,e)=>{for(const[t,s]of e)o[t]=s;return o};const xe={name:"App",setup(){return{appState:g(()=>i)}}},$e=a("footer",null,null,-1);function Ne(o,e,t,s,l,r){const n=x("Navbar"),v=x("router-view");return d(),c(I,null,[a("header",null,[y(n)]),a("main",null,[y(v)]),$e],64)}var Ce=h(xe,[["render",Ne]]);const ae=window.location.origin.includes("localhost"),j=ae?"http://localhost:3000":"",Se="kylee-marlin.us.auth0.com",ke="mpXgASnPybMqw6Qp3lKxL9QNqXVp7ylk",Ae="https://CoolStuff.com";function T(o,e){if(ae)console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(o){case"log":case"assert":return}console[o](`[${o}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const _={log(){T("log",arguments)},error(){T("error",arguments)},warn(){T("warn",arguments)},assert(){T("assert",arguments)},trace(){T("trace",arguments)}},m=K.create({baseURL:j,timeout:8e3}),Re=K.create({baseURL:"https://api.boardgameatlas.com/api",timeout:8e3});class Te{async getAccount(){try{const e=await m.get("/account");i.account=e.data}catch(e){_.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async edit(e){const t=await m.put("account/",e);i.account=t.data}}const se=new Te;class p{static async confirm(e="Are you sure?",t="You won't be able to revert this!",s="warning",l="Yes, delete it!"){try{return!!(await J.fire({title:e,text:t,icon:s,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:l})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",s="top-end",l=3e3,r=!0){J.fire({title:e,icon:t,position:s,timer:l,timerProgressBar:r,toast:!0,showConfirmButton:!1})}}const Ee={setup(){X();const o=$({});return Z(()=>{o.value={}}),{editable:o,async edit(){try{await se.edit(o.value),q.getOrCreateInstance(document.getElementById("accountModal")).hide()}catch(e){_.error(e),p.toast("Failed to Edit","error")}}}}},Ie={class:"modal fade",id:"accountModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Oe={class:"modal-dialog"},Me={class:"modal-content"},Pe=a("div",{class:"modal-header"},[a("h5",{class:"modal-title",id:"exampleModalLabel"},"Edit account"),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qe={class:"modal-body"},De={class:"mb-3 d-flex justify-content-between"},qe=a("label",{for:"picture",class:"form-label"},"Picture",-1),Le=a("label",{for:"name",class:"form-label"},"Name",-1),je=a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),a("button",{type:"submit",class:"btn btn-primary"}," Save ")],-1);function Be(o,e,t,s,l,r){return d(),c("div",Ie,[a("div",Oe,[a("div",Me,[Pe,a("div",Qe,[a("form",{onSubmit:e[2]||(e[2]=N((...n)=>s.edit&&s.edit(...n),["prevent"]))},[a("div",De,[a("div",null,[qe,f(a("input",{type:"url",class:"form-control",name:"picture",id:"picture","aria-describedby":"picture",placeholder:"picture...","onUpdate:modelValue":e[0]||(e[0]=n=>s.editable.picture=n)},null,512),[[w,s.editable.picture]])]),a("div",null,[Le,f(a("input",{type:"text",class:"form-control",name:"name",id:"name","aria-describedby":"name",placeholder:"Name...","onUpdate:modelValue":e[1]||(e[1]=n=>s.editable.name=n)},null,512),[[w,s.editable.name]])])]),je],32)])])])])}var Ve=h(Ee,[["render",Be]]),Ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ve});class oe{constructor(e){this.name=e.name,this.owned=e.owned||!1,this.accountId=e.accountId,this.atlasUrl=e.url||e.atlasUrl,this.description=e.description,this.houseRules=e.houseRules,this.rules_url=e.rules_url,this.atlasGameId=e.atlasGameId||e.id,this.id=e._id,this.min_players=e.min_players,this.max_players=e.max_players,this.price=e.price,this.min_playtime=e.min_playtime,this.max_playtime=e.max_playtime,this.image_url=e.image_url,this.min_age=e.min_age}}const ze="&client_id=RhH4WBOfK3";class He{async getAll(e=""){const t=await Re.get(e+"&limit=24"+ze);i.atlasGames=t.data.games.map(s=>new oe(s))}async getMyGames(e=""){const t=await m.get(e);i.myGames=t.data.map(s=>new oe(s))}async addToWishlist(e){if(i.myGames.find(s=>s.atlasUrl==e.atlasUrl))p.toast("Already in wishlist.","error");else{const s=await m.post("api/games",e);i.myGames.unshift(s.data)}}async addToGameCloset(e){if(e.id)await m.put("api/games/"+e.id,e);else{const t=await m.post("api/games",e);i.myGames.unshift(t.data)}}async addRules(e,t){await m.put("api/games/"+e,t)}async remove(e){await m.delete("api/games/"+e),i.myGames=i.myGames.filter(t=>t.id!==e)}}const k=new He;const We={props:{game:{type:Object}},setup(o){const e=$({});return{editable:e,closetGames:g(()=>i.myGames.filter(t=>t.owned)),myGameNights:g(()=>i.myGameNights),account:g(()=>i.account),async addRules(t){try{await k.addRules(t,e.value),q.getOrCreateInstance(document.getElementById("addRules-"+t)).hide(),await k.getMyGames("/account/myGames")}catch(s){_.log(s),p.toast(s.message,"error")}}}}},B=o=>(C("data-v-b7a60da2"),o=o(),S(),o),Ye={class:"modal-body"},Fe={class:"row"},Ke={class:"col m-2"},Je=B(()=>a("h6",null,"Add Official Rules with a link:",-1)),Xe={class:"row"},Ze={class:"col m-2"},et=B(()=>a("h6",null,"Add House Rules:",-1)),tt=B(()=>a("div",{class:"modal-footer"},[a("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Save Changes ")],-1));function at(o,e,t,s,l,r){return d(),c("form",{onSubmit:e[2]||(e[2]=N(n=>s.addRules(t.game.id),["prevent"]))},[a("div",Ye,[a("div",Fe,[a("div",Ke,[Je,f(a("input",{type:"url","aria-label":"OfficialRulesURL",placeholder:"Add Link to Official Rules",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>s.editable.rules_url=n)},null,512),[[w,s.editable.rules_url]])])]),a("div",Xe,[a("div",Ze,[et,f(a("textarea",{type:"text","aria-label":"HouseRules",placeholder:"Add House Rules",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>s.editable.houseRules=n)},null,512),[[w,s.editable.houseRules]])])])]),tt],32)}var st=h(We,[["render",at],["__scopeId","data-v-b7a60da2"]]),ot=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:st});class nt{async createGameNight(e){const t=await m.post("api/gamenight",e);i.activeGameNight=t.data,i.myGameNights.push(t.data)}async getMyGameNights(e=""){const t=await m.get(e),s=await m.get("account/players");let l=this.sortByDate(t.data),r=this.sortByDate(s.data);i.myGameNights=l,i.myAttendance=r}sortByDate(e){return e.sort((t,s)=>t.gameNightDate<s.gameNightDate?-1:t.gameNightDate>s.gameNightDate?1:0)}async delete(e){await m.delete("/api/gamenight/"+e),i.myGameNights=i.myGameNights.filter(t=>t.id!==e)}async cancel(e){let t=i.myGameNights;const l=(await m.put(`api/gamenight/${e}/isCanceled`)).data,r=i.myGameNights.findIndex(n=>n.id===l.id);r===-1&&i.myGameNights.unshift(l),t.splice(r,1,l)}async edit(e,t){const l=(await m.put(`api/gamenight/${e}`,t)).data,r=i.myGameNights.findIndex(n=>n.id===l.id);r===-1&&i.myGameNights.unshift(l),i.myGameNights.splice(r,1,l)}async findGameNight(e=""){const t=await m.get(`api/gamenight/pin/${e}`);return i.activeGameNight=t.data,t.data}async findGameNightId(e){const t=await m.get(`api/gamenight/${e}`);i.activeGameNight=t.data,_.log(t.data)}async getAllPlayers(e){const t=await m.get(`api/gamenight/${e}/players`);i.players=t.data}}const V=new nt,it={props:{gameNight:{type:Object}},setup(o){const e=$({}),t=$("Pick a game");return Z(async()=>{try{e.value=Y({},o.gameNight)}catch(s){_.error(s),p.toast(s.message,"error")}}),{editable:e,gameQueue:t,closetGames:g(()=>i.myGames.filter(s=>s.owned)),myGameNights:g(()=>i.myGameNights),account:g(()=>i.account),async editGameNight(s){try{await V.edit(s,e.value),_.log("editable.value",e.value,"gameNightId",s),q.getOrCreateInstance(document.getElementById("editGameNight-"+s)).hide(),await V.getMyGameNights("/account/gamenight")}catch(l){p.toast(l.message,"error")}}}}},lt={class:"modal-body"},rt={class:"row"},ct={class:"col m-2"},dt={class:"row"},mt={class:"col m-2"},ut={class:"row"},_t={class:"col m-2"},gt={class:"dropdown mx-4 my-2",hidden:""},ht={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},pt={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},bt=["onClick"],vt=a("div",{class:"modal-footer"},[a("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Save Changes ")],-1);function yt(o,e,t,s,l,r){return d(),c("form",{onSubmit:e[3]||(e[3]=N(n=>s.editGameNight(t.gameNight.id),["prevent"]))},[a("div",lt,[a("div",rt,[a("div",ct,[f(a("input",{type:"text","aria-label":"name",placeholder:"Name your game night",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>s.editable.name=n),required:""},null,512),[[w,s.editable.name]])])]),a("div",dt,[a("div",mt,[f(a("input",{type:"text","aria-label":"location",placeholder:"Location",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>s.editable.location=n),required:""},null,512),[[w,s.editable.location]])])]),a("div",ut,[a("div",_t,[f(a("input",{type:"datetime-local","aria-label":"date",placeholder:"Date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>s.editable.gameNightDate=n),required:""},null,512),[[w,s.editable.gameNightDate]])])]),a("div",gt,[a("button",ht,u(s.gameQueue),1),a("ul",pt,[(d(!0),c(I,null,ee(s.closetGames,n=>(d(),c("li",{key:n.atlasGameId},[a("div",{class:"dropdown-item selectable",onClick:v=>s.gameQueue=n.name},u(n.name),9,bt)]))),128))])])]),vt],32)}var ft=h(it,[["render",yt]]),wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ft});const Gt={props:{game:{type:Object},isSearchResult:{type:Boolean,default:!1}},setup(o){const e=ge();let t=$(!1);return{flipped:t,route:e,user:g(()=>i.user),account:g(()=>i.account),hasGame:g(()=>i.myGames.find(l=>l.atlasGameId===o.game.atlasGameId)),async addToWishlist(){try{const s=o.game,l=await k.addToWishlist(s);p.toast("Added to Wishlist","success")}catch(s){p.toast("Already in your wishlist!:"+s.message,"error"),_.error(s)}},async addToGameCloset(){try{const s=o.game;s.owned=!0,document.getElementById(o.game.atlasGameId).classList.add("animate__bounce"),await k.addToGameCloset(s),p.toast("Added to Game Closet","success")}catch(s){p.toast("Already in your closet!"+s.message,"error"),_.error(s)}},async remove(s){try{if(!await p.confirm("Remove game?"))return;document.getElementById(o.game.atlasGameId).classList.add("animate__rollOut"),setTimeout(async()=>{await k.remove(s)},600)}catch(l){p.toast(l.message,"error"),_.error(l)}},flipCard(){t.value=!t.value,t.value?document.getElementById(o.game.atlasGameId).style.transform="rotateY(180deg)":document.getElementById(o.game.atlasGameId).style.transform="rotateY(0deg)"}}}},ne=o=>(C("data-v-2c4298e2"),o=o(),S(),o),xt=["id"],$t={class:"flip-card-front elevation-3"},Nt={class:"container"},Ct={class:"row"},St={class:"col p-0"},kt=["src"],At={class:"row"},Rt={class:"col text-center my-1"},Tt={class:"col"},Et={class:"flip-card-back elevation-3"},It={class:"row"},Ot={key:0,class:"col text-danger text-end"},Mt=ne(()=>a("div",{class:"row"},[a("div",{class:"col"},[a("h3",{class:"my-4"},"Game Details")])],-1)),Pt={key:0,class:"row"},Qt={key:0,class:"col text-start mx-3"},Dt={key:1,class:"col text-start ms-3"},qt={key:1,class:"row"},Lt={key:0,class:"col text-start ms-3"},jt={key:1,class:"col text-start ms-3"},Bt={key:2,class:"row"},Vt={key:0,class:"col text-start ms-3"},Ut={class:"row"},zt={class:"col text-start mt-3 ms-3"},Ht={key:0},Wt=["href"],Yt={key:1},Ft=["href"],Kt={key:3,class:"row"},Jt={key:0,class:"col mt-3"},Xt={key:0,class:"row"},Zt={key:1,class:"col m-2 text-danger"},ea=ne(()=>a("p",null,"You have this game!",-1)),ta=[ea],aa={key:1,class:"col mt-3"};function sa(o,e,t,s,l,r){return d(),c("div",{class:"flip-card my-4 grow",onClick:e[7]||(e[7]=(...n)=>s.flipCard&&s.flipCard(...n))},[a("div",{class:"flip-card-inner selectable animate__animated",id:t.game.atlasGameId,style:{transform:"rotateY(0deg)"}},[a("div",$t,[a("div",Nt,[a("div",Ct,[a("div",St,[a("img",{class:"img-container m-2",src:t.game.image_url,alt:"",loading:"lazy"},null,8,kt)])]),a("div",At,[a("div",Rt,[a("h3",Tt,u(t.game.name),1)])])])]),a("div",Et,[a("div",It,[s.route.name=="GameCloset"?(d(),c("div",Ot,[a("i",{class:"mdi mdi-trash-can-outline selectable mdi-24px p-2",onClick:e[0]||(e[0]=n=>s.remove(t.game.id))})])):G("",!0)]),Mt,t.game.min_playtime&&t.game.max_playtime?(d(),c("div",Pt,[t.game.min_playtime===t.game.max_playtime?(d(),c("h4",Qt," Play time: "+u(t.game.min_playtime)+" minutes ",1)):(d(),c("h4",Dt," Play time: "+u(t.game.min_playtime)+" - "+u(t.game.max_playtime)+" minutes ",1))])):G("",!0),t.game.min_players&&t.game.max_players?(d(),c("div",qt,[t.game.min_players===t.game.max_players?(d(),c("h4",Lt," Number of players: "+u(t.game.min_players),1)):(d(),c("h4",jt," Number of players: "+u(t.game.min_players)+" - "+u(t.game.max_players),1))])):G("",!0),t.game.owned?G("",!0):(d(),c("div",Bt,[t.game.price>0?(d(),c("div",Vt,[a("h4",null,"Cost: $"+u(t.game.price),1)])):G("",!0)])),a("div",Ut,[a("div",zt,[t.game.owned?(d(),c("h5",Yt,[a("a",{"data-bs-toggle":"offcanvas",href:"#gameDetails-"+t.game.id},"See More Details",8,Ft)])):(d(),c("h5",Ht,[a("a",{target:"_blank",href:t.game.atlasUrl},"See More Details",8,Wt)]))])]),s.user.isAuthenticated?(d(),c("div",Kt,[t.isSearchResult?(d(),c("div",Jt,[s.hasGame?(d(),c("div",Zt,ta)):(d(),c("div",Xt,[a("div",{class:"col-6 text-center",onClick:e[2]||(e[2]=N(()=>{},["stop"]))},[s.route.name=="Search"&&!t.game.owned?(d(),c("button",{key:0,onClick:e[1]||(e[1]=n=>s.addToWishlist(t.game)),class:"btn btn-secondary",title:"add to wishlist"}," Wishlist ")):G("",!0)]),a("div",{class:"col-6 text-center px-2",onClick:e[4]||(e[4]=N(()=>{},["stop"]))},[t.game.owned?G("",!0):(d(),c("button",{key:0,class:"btn btn-secondary",title:"add to game closet",onClick:e[3]||(e[3]=n=>s.addToGameCloset(t.game))}," Closet "))])]))])):(d(),c("div",aa,[a("div",{class:"text-end",onClick:e[6]||(e[6]=N(()=>{},["stop"]))},[t.game.owned?G("",!0):(d(),c("button",{key:0,class:"btn btn-secondary me-3",title:"add to game closet",onClick:e[5]||(e[5]=n=>s.addToGameCloset(t.game))}," Closet "))])]))])):G("",!0)])],8,xt)])}var oa=h(Gt,[["render",sa],["__scopeId","data-v-2c4298e2"]]),na=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:oa});const ia={props:{game:{type:Object}},setup(o){return{editable:$({}),closetGames:g(()=>i.myGames.filter(t=>t.owned)),async addRules(t){try{let s=t.target.innerText,l=o.game.id,r={houseRules:s};await k.addRules(l,r),await k.getMyGames("/account/myGames")}catch(s){_.log(s),p.toast(s.message,"error")}}}}},ie=o=>(C("data-v-1f06305c"),o=o(),S(),o),la={class:"offcanvas-body p-1"},ra={class:"col text-center"},ca=["src","alt"],da={class:"col my-2"},ma={key:0,class:"col"},ua={key:1,class:"col"},_a={class:"col"},ga=["innerHTML"],ha={class:"accordion mb-5 col mt-3",id:"accordionExample"},pa={class:"accordion-item bgColor"},ba=ie(()=>a("h2",{class:"accordion-header",id:"headingOne"},[a("button",{class:"accordion-button bg-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Official Rules ")],-1)),va={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},ya={key:0,class:"accordion-body"},fa=["href"],wa={key:1,class:"accordion-body"},Ga=["data-bs-target"],xa=["data-bs-target"],$a={class:"accordion-item bgColor"},Na=ie(()=>a("h2",{class:"accordion-header",id:"headingTwo"},[a("button",{class:"accordion-button collapsed bg-light",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," House Rules ")],-1)),Ca={id:"collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample"};function Sa(o,e,t,s,l,r){const n=x("QRCodeGame");return d(),c("div",la,[a("div",ra,[a("img",{class:"img-container m-2",src:t.game.image_url,alt:t.game.name},null,8,ca)]),a("div",da,[a("h2",null,u(t.game.name),1)]),t.game.min_players!==t.game.max_players?(d(),c("div",ma,u(t.game.min_players)+" to "+u(t.game.max_players)+" players ",1)):(d(),c("div",ua,u(t.game.min_players)+" players",1)),a("div",_a,u(t.game.min_playtime)+" to "+u(t.game.max_playtime)+" minute playtime ",1),a("div",{class:"col mt-2",innerHTML:t.game.description},null,8,ga),a("div",ha,[a("div",pa,[ba,a("div",va,[t.game.rules_url?(d(),c("div",ya,[a("a",{target:"_blank",href:t.game.rules_url},u(t.game.name)+" Rules",9,fa),y(n,{game:t.game},null,8,["game"])])):(d(),c("div",wa,[a("p",null,[A(" No "+u(t.game.name)+" rules found. ",1),a("span",{"data-bs-toggle":"modal","data-bs-target":"#addRules-"+t.game.id,class:"selectable"},"Add now?",8,Ga)]),a("i",{class:"mdi mdi-plus-thick text-secondary selectable btn","data-bs-toggle":"modal","data-bs-target":"#addRules-"+t.game.id,title:"Add Official Rules"}," Add Rules",8,xa)]))])]),a("div",$a,[Na,a("div",Ca,[a("div",{class:"accordion-body hover",contenteditable:"",onBlur:e[0]||(e[0]=(...v)=>s.addRules&&s.addRules(...v))},u(t.game.houseRules),33)])])])])}var ka=h(ia,[["render",Sa],["__scopeId","data-v-1f06305c"]]),Aa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ka});const Ra={setup(){return{}}},Ta={class:"modal",tabindex:"-1"},Ea={class:"modal-dialog modal-xl"},Ia={class:"modal-content"},Oa={class:"modal-header"},Ma={class:"modal-title"},Pa=a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Qa={class:"modal-body"};function Da(o,e,t,s,l,r){return d(),c("div",Ta,[a("div",Ea,[a("div",Ia,[a("div",Oa,[a("h5",Ma,[O(o.$slots,"modal-title")]),Pa]),a("div",Qa,[O(o.$slots,"modal-body")])])])])}var qa=h(Ra,[["render",Da]]),La=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qa});const ja="modulepreload",le={},Ba="/",R=function(e,t){return!t||t.length===0?e():Promise.all(t.map(s=>{if(s=`${Ba}${s}`,s in le)return;le[s]=!0;const l=s.endsWith(".css"),r=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const n=document.createElement("link");if(n.rel=l?"stylesheet":ja,l||(n.as="script",n.crossOrigin=""),n.href=s,document.head.appendChild(n),l)return new Promise((v,Q)=>{n.addEventListener("load",v),n.addEventListener("error",Q)})})).then(()=>e())};function Va(o){switch(o){case"./pages/AboutPage.vue":return R(()=>import("./AboutPage.ba6140d0.js"),["assets/AboutPage.ba6140d0.js","assets/vendor.369051b3.js"]);case"./pages/AccountPage.vue":return R(()=>import("./AccountPage.2331adab.js"),["assets/AccountPage.2331adab.js","assets/AccountPage.1d38451d.css","assets/vendor.369051b3.js"]);case"./pages/ActiveGameNightPage.vue":return R(()=>import("./ActiveGameNightPage.a23a5be7.js"),["assets/ActiveGameNightPage.a23a5be7.js","assets/ActiveGameNightPage.98f5bb6a.css","assets/vendor.369051b3.js"]);case"./pages/GameClosetPage.vue":return R(()=>import("./GameClosetPage.ed670110.js"),["assets/GameClosetPage.ed670110.js","assets/GameClosetPage.64ac7c0a.css","assets/vendor.369051b3.js"]);case"./pages/GameNightPage.vue":return R(()=>import("./GameNightPage.7c8ca919.js"),["assets/GameNightPage.7c8ca919.js","assets/GameNightPage.1412185f.css","assets/vendor.369051b3.js"]);case"./pages/SearchPage.vue":return R(()=>import("./SearchPage.d27e3864.js"),["assets/SearchPage.d27e3864.js","assets/SearchPage.3f5244e4.css","assets/vendor.369051b3.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+o)))})}}function E(o){return()=>Va(`./pages/${o}.vue`)}const Ua=[{path:"/",name:"GameCloset",component:E("GameClosetPage"),beforeEnter:M},{path:"/search",name:"Search",component:E("SearchPage"),beforeEnter:M},{path:"/gameNight",name:"GameNight",component:E("GameNightPage"),beforeEnter:M},{path:"/gameNight/:id",name:"GameNightDetails",component:E("ActiveGameNightPage"),beforeEnter:M},{path:"/account",name:"Account",component:E("AccountPage"),beforeEnter:be}],re=he({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:pe(),routes:Ua}),P={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class za{constructor(e=!1,t=j){this.socket=ve(t||j),this.requiresAuth=e,this.queue=[],this.authenticated=!1,this.on(P.connected,this.onConnected).on(P.authenticated,this.onAuthenticated).on(P.error,this.onError)}on(e,t){var s;return(s=this.socket)==null||s.on(e,t.bind(this)),this}onConnected(e){_.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){_.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(P.authenticate,e)}joinRoom(e){var t;(t=this.socket)==null||t.emit("Join_Room",`Game${e}Night`),_.log("Joined_Room",e)}onError(e){_.error("[SOCKET_ERROR]",e)}enqueue(e,t){_.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){_.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class Ha extends za{constructor(){super();this.on("error",this.onError).on("New Game Que",this.newGameQ).on("Removed Game Que",this.removedGameQ).on("Votes on Game Que",this.votes).on("Attending Game Night",this.newPlayer).on("Leaving Game Night",this.deletePlayer).on("Bringing Game Night",this.bringing)}newGameQ(e){i.gameQueue.push(e)}removedGameQ(e){i.gameQueue=i.gameQueue.filter(t=>t.id!==e)}votes(e){let t=i.gameQueue.findIndex(s=>s.id===e.id);i.gameQueue.splice(t,1,e)}newPlayer(e){i.players=[...i.players,e]}deletePlayer(e){i.players=i.players.filter(t=>t.id!==e.id),i.gameQueue=i.gameQueue.filter(t=>t.accountId!==e.accountId)}bringing(e){_.log("player id",e);let t=i.players.findIndex(s=>s.id===e);i.players.splice(t,1,e)}onError(e){p.toast(e.message,"error")}}const ce=new Ha,b=ye({domain:Se,clientId:ke,audience:Ae,useRefreshTokens:!0,onRedirectCallback:o=>{re.push(o&&o.targetUrl?o.targetUrl:window.location.pathname)}});b.on(b.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=b.bearer,m.interceptors.request.use(Wa),i.user=b.user,await se.getAccount(),ce.authenticate(b.bearer)});async function Wa(o){if(!b.isAuthenticated)return o;const e=b.identity.exp*1e3,t=e<Date.now(),s=e<Date.now()+1e3*60*60*12;return t?await b.loginWithPopup():s&&(await b.getTokenSilently(),m.defaults.headers.authorization=b.bearer,ce.authenticate(b.bearer)),o}var Ya="/assets/GameQ2.7a579647.png";const Fa={setup(){return{user:g(()=>i.user),account:g(()=>i.account),async login(){b.loginWithPopup()},async logout(){b.logout({returnTo:window.location.origin})}}}},U=o=>(C("data-v-4a5d9cf2"),o=o(),S(),o),Ka={class:"navbar navbar-expand-lg navbar-dark bg-primary px-3 border-bottom border-2 border-dark"},Ja=fe('<div class="d-flex flex-column align-items-center me-5" data-v-4a5d9cf2><a href="/" data-v-4a5d9cf2><img alt="logo" src="'+Ya+'" height="60" data-v-4a5d9cf2></a></div><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation" data-v-4a5d9cf2><span class="navbar-toggler-icon" data-v-4a5d9cf2></span></button>',2),Xa={class:"collapse navbar-collapse",id:"navbarText"},Za={class:"navbar-nav me-auto"},es=A(" Game Closet "),ts=A(" Search Games "),as=A(" Game Night "),ss=U(()=>a("button",{class:"btn btn-light me-5",title:"Host Game","data-bs-target":"#hostModal","data-bs-toggle":"modal"}," Host Game Night ",-1)),os={class:"navbar-text"},ns={key:1,class:"dropdown my-2 my-lg-0"},is={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},ls=["src"],rs={class:"mx-3 text-ep"},cs={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},ds=U(()=>a("div",{class:"list-group-item list-group-item-action hoverable","data-bs-target":"#accountModal","data-bs-toggle":"modal"}," Manage Account ",-1)),ms=U(()=>a("i",{class:"mdi mdi-logout"},null,-1)),us=A(" logout "),_s=[ms,us];function gs(o,e,t,s,l,r){const n=x("router-link"),v=x("hostModal"),Q=x("AccountModal");return d(),c(I,null,[a("nav",Ka,[Ja,a("div",Xa,[a("ul",Za,[a("li",null,[y(n,{to:{name:"GameCloset"},class:"btn text-ep selectable text-uppercase text-light"},{default:L(()=>[es]),_:1})]),a("li",null,[y(n,{to:{name:"Search"},class:"btn text-ep selectable text-uppercase text-light search-borders"},{default:L(()=>[ts]),_:1})]),a("li",null,[y(n,{to:{name:"GameNight"},class:"btn text-ep selectable text-uppercase text-light"},{default:L(()=>[as]),_:1})])]),ss,a("span",os,[s.user.isAuthenticated?(d(),c("div",ns,[a("div",is,[a("img",{src:s.account.picture,alt:"user photo",height:"40",class:"rounded-circle profile-img"},null,8,ls),a("span",rs,u(s.account.name),1)]),a("div",cs,[ds,a("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...D)=>s.logout&&s.logout(...D))},_s)])])):(d(),c("button",{key:0,class:"btn selectable text-ep text-light text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...D)=>s.login&&s.login(...D))}," Login "))])])]),y(v),y(Q)],64)}var hs=h(Fa,[["render",gs],["__scopeId","data-v-4a5d9cf2"]]),ps=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:hs});const bs={setup(){return{}}},de=o=>(C("data-v-177e1b58"),o=o(),S(),o),vs={class:"offcanvas offcanvas-start rounded",tabindex:"-1","aria-labelledby":"offcanvasLabel"},ys={class:"offcanvas-header"},fs={class:"offcanvas-title col-md-10",id:"offcanvasLabel"},ws=de(()=>a("button",{type:"button",class:"btn-close text-reset col-md-2","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1)),Gs=de(()=>a("div",{class:"grad"},null,-1)),xs={class:"offcanvas-body"};function $s(o,e,t,s,l,r){return d(),c("div",vs,[a("div",ys,[a("h5",fs,[O(o.$slots,"offcanvas-title",{},void 0,!0)]),ws]),Gs,a("div",xs,[O(o.$slots,"offcanvas-body",{},void 0,!0)])])}var Ns=h(bs,[["render",$s],["__scopeId","data-v-177e1b58"]]),Cs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ns});const Ss={props:{player:{type:Object,required:!0}},setup(){return{account:g(()=>i.account),players:g(()=>i.players)}}},ks={class:"component"},As={key:0,class:"card p-2"},Rs=["src"];function Ts(o,e,t,s,l,r){var n;return d(),c("div",ks,[t.player.items?(d(),c("div",As,[a("h3",null,[a("img",{src:t.player.account.picture,alt:"player picture",class:"pic me-3"},null,8,Rs),A(u((n=t.player.account)==null?void 0:n.name),1)]),a("p",null,u(t.player.items),1)])):G("",!0)])}var Es=h(Ss,[["render",Ts],["__scopeId","data-v-0a3092d3"]]),Is=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Es});const Os={props:{game:{type:Object}},setup(o){return{closetGames:g(()=>i.myGames.filter(e=>e.owned))}}},Ms=o=>(C("data-v-2f60057b"),o=o(),S(),o),Ps={class:"component"},Qs=Ms(()=>a("p",null,"QR Code for rules",-1)),Ds={class:"qrcode"},qs=["src"];function Ls(o,e,t,s,l,r){const n=x("vue-qrcode");return d(),c("div",Ps,[Qs,a("figure",Ds,[y(n,{value:t.game.rules_url,options:{errorCorrectionLevel:"Q",width:200,color:{dark:"#840196",light:"#ffffff"}}},null,8,["value"]),a("img",{class:"qrcode__image",src:t.game.image_url,alt:"game.name"},null,8,qs)])])}var js=h(Os,[["render",Ls],["__scopeId","data-v-2f60057b"]]),Bs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:js});const Vs={props:{gameNight:{type:Object}},setup(o){return{gameNight:g(()=>i.gameNights)}}},Us=o=>(C("data-v-80bbd8fa"),o=o(),S(),o),zs={class:"component"},Hs=Us(()=>a("p",null,"QR Code to join a Game Night",-1)),Ws={class:"qrcode"};function Ys(o,e,t,s,l,r){const n=x("vue-qrcode");return d(),c("div",zs,[Hs,a("figure",Ws,[y(n,{value:"http://localhost:8080/api/gamenight/"+s.gameNight.id,options:{errorCorrectionLevel:"Q",width:200,color:{dark:"#840196",light:"#ffffff"}}},null,8,["value"])])])}var Fs=h(Vs,[["render",Ys],["__scopeId","data-v-80bbd8fa"]]),Ks=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Fs});const Js={props:{gameNight:{type:Object}},setup(o){return{gameNight:g(()=>i.gameNights)}}},Xs={class:"component"},Zs={class:"modal",tabindex:"-1",id:"qrCodeModal"},eo={class:"modal-dialog"},to={class:"modal-content"},ao=a("div",{class:"modal-header"},[a("h5",{class:"modal-title"},"Join Game Night"),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),so={class:"modal-body"},oo=a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),a("button",{type:"button",class:"btn btn-primary"},"Save changes")],-1);function no(o,e,t,s,l,r){const n=x("QRCodeJoin");return d(),c("div",Xs,[a("div",Zs,[a("div",eo,[a("div",to,[ao,a("div",so,[y(n,{gameNight:s.gameNight},null,8,["gameNight"])]),oo])])])])}var io=h(Js,[["render",no]]),lo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:io});class ro{async addToGameQueue(e){await m.post("api/gamequeue",e)}async removeGameQueue(e){await m.delete(`api/gamequeue/${e}`),i.gameQueue=i.gameQueue.filter(t=>t.id!==e)}async getAllGameQueue(e){const t=await m.get(`api/gamenight/${e}/gamequeue`);i.gameQueue=t.data}async vote(e){await m.put(`api/gamequeue/${e}/votes`)}sortByVote(e){return e.sort((t,s)=>t.vote<s.vote?-1:t.vote>s.vote?1:0)}}const co=new ro;class mo{async attendGameNight(e){await m.post(`api/players/${e}`)}async unattendGameNight(e){await m.delete(`api/players/${e}`)}async editMyItems(e){const s=(await m.put(`api/players/${e.id}`,e)).data,l=i.players.findIndex(r=>r.id===e.id);if(l===-1){i.players.push(s);return}i.players.splice(l,1,s)}async getGameNightsImAttending(){const e=await m.get("account/players");i.myAttending=e.data}}const uo=new mo,_o={setup(){let o=X();$({});const e=$("Choose a game!"),t=F({editable:{}});return{closetGames:g(()=>i.myGames.filter(s=>s.owned)),gameQueue:e,state:t,async createGameNight(){try{const s=e.value;_.log("create",t.editable,"gameQueue",s),await V.createGameNight(t.editable);const l=i.activeGameNight;await uo.attendGameNight(l.pin);const r=i.myGames.find(v=>v.name===s);_.log("Active GameNight",i.activeGameNight),_.log("Player",i.players);let n={gameId:r.id,gameNightId:i.activeGameNight.id};await co.addToGameQueue(n),o.push({name:"GameNightDetails",params:{id:i.activeGameNight.id}}),t.editable={}}catch(s){_.error(s),p.toast(s.message,"error")}}}}},go={class:"modal fade",id:"hostModal","aria-hidden":"true","aria-labelledby":"hostModal",tabindex:"-1"},ho={class:"modal-dialog modal-dialog-centered"},po={class:"modal-content"},bo=a("div",{class:"modal-header bg-secondary"},[a("h5",{class:"modal-title",id:"exampleModalToggleLabel"}," Host a Game Night "),a("button",{type:"button",class:"btn-close bg-secondary","data-bs-dismiss":"modal","aria-label":"Close"})],-1),vo={class:"modal-body"},yo={class:"row"},fo={class:"col m-2"},wo={class:"row"},Go={class:"col m-2"},xo={class:"row"},$o={class:"col m-2"},No={class:"dropdown mx-4 my-2"},Co={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",required:""},So={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},ko=["onClick"],Ao=a("div",{class:"modal-footer"},[a("button",{type:"submit",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," Create ")],-1);function Ro(o,e,t,s,l,r){return d(),c("div",go,[a("div",ho,[a("div",po,[bo,a("form",{onSubmit:e[3]||(e[3]=N(n=>s.createGameNight(),["prevent"]))},[a("div",vo,[a("div",yo,[a("div",fo,[f(a("input",{type:"text","aria-label":"name",placeholder:"Name your game night",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=n=>s.state.editable.name=n),required:""},null,512),[[w,s.state.editable.name]])])]),a("div",wo,[a("div",Go,[f(a("input",{type:"text","aria-label":"location",placeholder:"Location",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=n=>s.state.editable.location=n),required:""},null,512),[[w,s.state.editable.location]])])]),a("div",xo,[a("div",$o,[f(a("input",{type:"datetime-local","aria-label":"date",placeholder:"Date",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=n=>s.state.editable.gameNightDate=n),required:""},null,512),[[w,s.state.editable.gameNightDate]])])]),a("div",No,[a("button",Co,u(s.gameQueue),1),a("ul",So,[(d(!0),c(I,null,ee(s.closetGames,n=>(d(),c("li",{key:n.atlasGameId},[a("div",{class:"dropdown-item selectable",onClick:v=>s.gameQueue=n.name},u(n.name),9,ko)]))),128))])])]),Ao],32)])])])}var To=h(_o,[["render",Ro]]),Eo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:To});function Io(o){Object.entries({"./components/AccountModal.vue":Ue,"./components/AddRulesForm.vue":ot,"./components/EditForm.vue":wt,"./components/Game.vue":na,"./components/GameDetails.vue":Aa,"./components/Modal.vue":La,"./components/Navbar.vue":ps,"./components/OffCanvas.vue":Cs,"./components/PlayerItems.vue":Is,"./components/QRCodeGame.vue":Bs,"./components/QRCodeJoin.vue":Ks,"./components/QRCodeModal.vue":lo,"./components/hostModal.vue":Eo}).forEach(([t,s])=>{const l=s.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");o.component(l,s.default)})}const z=we(Ce);Io(z);z.component(te.name,te);z.use(re).mount("#app");export{i as A,Es as P,h as _,p as a,V as b,k as c,b as d,co as g,_ as l,uo as p,ce as s};
